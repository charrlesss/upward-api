"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[451],{1957:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(1413),r=n(9439),a=n(2791),o=n(4554),d=n(7482),s=n(6212),l=n(1128),c=n(184);function u(e){var t=e.onSelectionChange,n=e.initialPage,u=void 0===n?10:n,h=e.columns,f=e.rowHeight,m=void 0===f?35:f,p=e.getRowId,w=e.rows,g=e.isLoading,y=e.mutipleSelect,x=e.height,N=void 0===x?"500px":x,v=(0,l.Z)(),b=v.searchParams,S=v.setSearchParams,Z=(0,a.useState)([]),k=(0,r.Z)(Z,2),C=k[0],A=k[1],j=(0,a.useState)(!1),_=(0,r.Z)(j,2),D=_[0],I=_[1],M=a.useState({pageSize:parseInt(b.get("pageSize"))||100,page:parseInt(b.get("page"))||1}),O=(0,r.Z)(M,2),E=O[0],T=O[1];if((0,a.useEffect)((function(){A(""===b.get("selected")?[]:[b.get("selected")])}),[b]),(0,a.useEffect)((function(){t(C,w)}),[D]),g){var z=h.map((function(e){return"id"===e.field&&(e=(0,i.Z)((0,i.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,c.jsx)(o.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,c.jsx)(s._$,{slots:{loadingOverlay:d.Z},loading:g,rows:[{id:"Loading..."}],columns:z})})}return(0,c.jsxs)(o.Z,{sx:{height:N,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,c.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){A([])},children:"reset"}),y?(0,c.jsx)(s._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:d.Z},loading:g,rowHeight:m,rows:w,columns:h,initialState:{pagination:{paginationModel:{page:0,pageSize:u}}},pageSizeOptions:[u,25,50,100],getRowId:p}):(0,c.jsx)(s._$,{slots:{loadingOverlay:d.Z},loading:g,rowHeight:m,rows:w,columns:h,initialState:{pagination:{paginationModel:{page:0,pageSize:u}}},checkboxSelection:!0,pageSizeOptions:[u,25,50,100],onRowDoubleClick:function(e){I((function(e){return!e})),A((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(C),i=e.filter((function(e){return!n.has(e)}));t(i,w),A(i)}else t(e,w),A(e)},disableRowSelectionOnClick:!0,rowSelectionModel:C,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:p,paginationModel:E,onPaginationModelChange:function(e){T(e),S((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},5088:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(184);function r(e){var t=e.name,n=e.label;return(0,i.jsx)("div",{style:{flex:1,minWidth:"190px",position:"relative"},children:(0,i.jsxs)("fieldset",{style:{position:"relative",height:"40px",margin:"0",outline:"none",borderRadius:"5px",border:"1px solid #9ca3af"},children:[(0,i.jsx)("legend",{style:{fontSize:"11px",margin:0,position:"absolute",top:"-10px",background:"white",padding:"0 5px"},children:n}),(0,i.jsx)("p",{id:"".concat(t,"-text"),style:{position:"absolute",top:"-20%",fontSize:"15px",color:"#71717a"},children:"Generate ID, Click New"}),(0,i.jsx)("input",{type:"text",name:t,style:{opacity:0,position:"absolute"}})]})})}},451:function(e,t,n){n.r(t),n.d(t,{EntryOthers:function(){return Z},default:function(){return C}});var i,r=n(4942),a=n(7762),o=n(9439),d=n(4165),s=n(5861),l=n(2791),c=n(4554),u=n(8550),h=n(3380),f=n(5088),m=n(1957),p=n(1128),w=n(7432),g=n(1933),y=n(6166),x=n(1830),N=n.n(x),v=n(3263),b=n(8749),S=n(184);function Z(e,t,n,r,a){return(i=i||(0,s.Z)((0,d.Z)().mark((function e(t,n,i,r,a){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}return e.next=3,t.post("/reference/entry-update?entry=".concat(a),i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,t.post("/reference/id-entry-others",i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={description:""};function C(e){var t,n,i,x,C=e.hasSelected,A=(0,p.Z)(),j=A.searchParams,_=A.setSearchParams,D=(0,l.useContext)(v.v),I=D.rows,M=D.setRows,O=D.loadingSearch,E=D.exportMode,T=(0,l.useReducer)(b.I6,k),z=(0,o.Z)(T,2),F=z[0],L=z[1],R=(0,l.useContext)(h.V),B=R.myAxios,P=R.user,G=(0,l.useState)(!1),K=(0,o.Z)(G,2),H=K[0],V=K[1],q=(0,g.useQueryClient)(),Q="entry_others_id",U=(0,g.useQuery)({queryKey:Q,queryFn:function(){return(t=t||(0,s.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Ku)(B,P,"Others",j.get("entrySearch"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){M(null===e||void 0===e?void 0:e.data.entry)}}),$=U.isLoading,W=(0,g.useMutation)({mutationKey:Q,mutationFn:function(e){return(n=n||(0,s.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(B,P,t,""!==j.get("selected"),"Others");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),e.data.success&&(q.invalidateQueries(Q),N().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),X=W.mutate,J=W.isLoading,Y=(0,g.useMutation)({mutationKey:Q,mutationFn:function(e){return(i=i||(0,s.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.post("/reference/entry-delete?entry=Others",t,{headers:{Authorization:"Bearer ".concat(null===P||void 0===P?void 0:P.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),e.data.success&&(q.invalidateQueries(Q),N().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),ee=Y.mutate,te=Y.isLoading;(0,l.useEffect)((function(){if(""===j.get("selected"))return C(!1),void V(!0);var e=j.get("selected"),t=new Set([e]),n=I.filter((function(e){return t.has(e[Q].toString())}))[0];n&&(C(!0),V(!1),(0,y.setNewStateValue)(L,j,n,Q))}),[I,j,C]);function ne(){(0,w.I)(j.get("classification"),""),Object.entries(k).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];L({type:"UPDATE_FIELD",field:n,value:i})}))}return(0,S.jsxs)(l.Fragment,{children:[(0,S.jsx)("button",{id:"delete-entry-by-id",style:{display:"none",position:"absolute"},onClick:function(){return ee({id:j.get("selected")})}}),(0,S.jsx)("button",{id:"enable-fields",style:{display:"none",position:"absolute"},onClick:function(){return V(!1)}}),(0,S.jsx)("button",{id:"disable-fields",style:{display:"none",position:"absolute"},onClick:function(){return V(!0)}}),(0,S.jsx)("form",{onSubmit:function(e){return(x=x||(0,s.Z)((0,d.Z)().mark((function e(t){var n,i,r,s,l,c,u;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=new FormData(t.currentTarget),i={},r=(0,a.Z)(n.entries());try{for(r.s();!(s=r.n()).done;)l=(0,o.Z)(s.value,2),c=l[0],u=l[1],i[c]=u}catch(d){r.e(d)}finally{r.f()}X(i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},style:{width:"100%"},id:"Form-Others",children:(0,S.jsxs)(c.Z,{sx:function(e){var t;return t={display:"flex",columnGap:"15px",flexDirection:"row"},(0,r.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,r.Z)(t,"marginBottom","10px"),t},children:[(0,S.jsx)(c.Z,{sx:function(e){var t;return t={width:"300px"},(0,r.Z)(t,e.breakpoints.down("md"),{width:"100%"}),(0,r.Z)(t,"marginBottom","10px"),t},children:(0,S.jsx)(f.Z,{label:"Others Id Entry",name:"entry_others_id"})}),(0,S.jsx)(u.Z,{label:"Description",size:"small",fullWidth:!0,style:{marginBottom:"10px"},name:"description",value:F.description,onChange:function(e){var t=e.target,n=t.name,i=t.value;L({type:"UPDATE_FIELD",field:n,value:i})},required:!0,disabled:H}),(0,S.jsx)("button",{type:"submit",id:"Others",style:{display:"none"}}),(0,S.jsx)("button",{type:"button",id:"Others-reset",onClick:ne,style:{display:"none"}})]})}),(0,S.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,S.jsx)(m.Z,{mutipleSelect:E,isLoading:$||O||J||te,dataKey:"entry",queryKey:[Q],columns:b.m5,onSelectionChange:function(e,t){if(e.length<=0)return ne(),C(!1),V(!0),void _((function(e){return e.set("selected",""),e}));V(!1),C(!0);var n=new Set(e),i=t.filter((function(e){return n.has(e[Q].toString())}));_((function(t){return t.set("selected",e[0]),t})),(0,y.setNewStateValue)(L,j,i[0],Q)},getRowId:function(e){return e[Q]},rows:I,setRows:M})})]})}},8749:function(e,t,n){n.d(t,{GY:function(){return h},I6:function(){return m},Ku:function(){return p},fJ:function(){return u},kb:function(){return l},m5:function(){return f},oy:function(){return s},y:function(){return c}});var i,r=n(4165),a=n(5861),o=n(4942),d=n(1413),s=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],l=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],c=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],h=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],f=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"createdAt",headerName:"Created At",width:200}],m=function(e,t){return"UPDATE_FIELD"===t.type?(0,d.Z)((0,d.Z)({},e),{},(0,o.Z)({},t.field,t.value)):e};function p(e,t,n,o){return(i=i||(0,a.Z)((0,r.Z)().mark((function e(t,n,i,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/reference/search-entry?entrySearch=".concat(a,"&entry=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=451.c333b689.chunk.js.map