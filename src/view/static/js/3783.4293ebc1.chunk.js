"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3783],{1957:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(1413),r=n(9439),i=n(2791),a=n(4554),c=n(7482),l=n(6212),s=n(1128),u=n(184);function d(e){var t=e.onSelectionChange,n=e.initialPage,d=void 0===n?10:n,g=e.columns,f=e.rowHeight,p=void 0===f?35:f,h=e.getRowId,x=e.rows,m=e.isLoading,v=e.mutipleSelect,Z=e.height,b=void 0===Z?"500px":Z,y=(0,s.Z)(),w=y.searchParams,S=y.setSearchParams,C=(0,i.useState)([]),j=(0,r.Z)(C,2),k=j[0],M=j[1],I=(0,i.useState)(!1),A=(0,r.Z)(I,2),B=A[0],E=A[1],P=i.useState({pageSize:parseInt(w.get("pageSize"))||100,page:parseInt(w.get("page"))||1}),D=(0,r.Z)(P,2),z=D[0],T=D[1];if((0,i.useEffect)((function(){M(""===w.get("selected")?[]:[w.get("selected")])}),[w]),(0,i.useEffect)((function(){t(k,x)}),[B]),m){var L=g.map((function(e){return"id"===e.field&&(e=(0,o.Z)((0,o.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(a.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(l._$,{slots:{loadingOverlay:c.Z},loading:m,rows:[{id:"Loading..."}],columns:L})})}return(0,u.jsxs)(a.Z,{sx:{height:b,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){M([])},children:"reset"}),v?(0,u.jsx)(l._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:c.Z},loading:m,rowHeight:p,rows:x,columns:g,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},pageSizeOptions:[d,25,50,100],getRowId:h}):(0,u.jsx)(l._$,{slots:{loadingOverlay:c.Z},loading:m,rowHeight:p,rows:x,columns:g,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},checkboxSelection:!0,pageSizeOptions:[d,25,50,100],onRowDoubleClick:function(e){E((function(e){return!e})),M((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(k),o=e.filter((function(e){return!n.has(e)}));t(o,x),M(o)}else t(e,x),M(e)},disableRowSelectionOnClick:!0,rowSelectionModel:k,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:h,paginationModel:z,onPaginationModelChange:function(e){T(e),S((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},341:function(e,t,n){n.d(t,{L:function(){return u}});var o=n(9439),r=n(2791),i=n(6151),a=n(5117),c=n(3786),l=n(7),s=n(184);function u(e){var t=e.setExportMode,n=r.useState(null),u=(0,o.Z)(n,2),d=u[0],g=u[1],f=Boolean(d),p=function(){g(null)};return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(i.Z,{id:"basic-button","aria-controls":f?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":f?"true":void 0,onClick:function(e){g(e.currentTarget),t(!0)},variant:"contained",sx:{backgroundColor:l.Z[500],"&:hover":{backgroundColor:l.Z[600]}},children:"Export"}),(0,s.jsxs)(a.Z,{id:"basic-menu",anchorEl:d,open:f,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,s.jsx)(c.Z,{onClick:p,children:"Export as Excel All Data "}),(0,s.jsxs)(c.Z,{onClick:p,children:["Export as Excel Only Data in Table"," "]}),(0,s.jsx)(c.Z,{onClick:p,children:"Print Data in Table"})]})]})}},3783:function(e,t,n){n.r(t),n.d(t,{default:function(){return T},poliyAccountColumn:function(){return D},reducer:function(){return P},setNewStateValue:function(){return L}});var o=n(4165),r=n(5861),i=n(9439),a=n(4942),c=n(1413),l=n(2791),s=n(4554),u=n(890),d=n(8550),g=n(6151),f=n(3239),p=n(2419),h=n(7247),x=n(1128),m=n(1957),v=n(4378),Z=n(3380),b=n(1933),y=n(1830),w=n.n(y),S=n(9018),C=n(763),j=n(7),k=n(9823),M=n(3329),I=n(341),A=n(5712),B=n(184),E={Mortgagee:"",Policy:""},P=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},D=[{field:"Policy",headerName:"Policy",flex:1},{field:"Mortgagee",headerName:"Mortgagee",flex:1},{field:"createdAt",headerName:"Created At",flex:1}],z="mortgagee-account";function T(){var e,t,y,T=(0,x.Z)(),F=T.searchParams,O=T.setSearchParams,R=(0,l.useReducer)(P,E),G=(0,i.Z)(R,2),H=G[0],_=G[1],Y=(0,l.useContext)(Z.V),N=Y.myAxios,K=Y.user,U=(0,l.useState)(!1),V=(0,i.Z)(U,2),q=V[0],Q=V[1],$=(0,l.useState)(!1),X=(0,i.Z)($,2),W=X[0],J=X[1],ee=(0,l.useState)(""!==F.get("selected")),te=(0,i.Z)(ee,2),ne=te[0],oe=te[1],re=(0,l.useState)(""!==F.get("selected")),ie=(0,i.Z)(re,2),ae=ie[0],ce=ie[1],le=(0,l.useState)(""!==F.get("selected")),se=(0,i.Z)(le,2),ue=se[0],de=se[1],ge=(0,l.useState)([]),fe=(0,i.Z)(ge,2),pe=fe[0],he=fe[1],xe=(0,l.useRef)(null),me=(0,l.useState)(""!==F.get("selected")),ve=(0,i.Z)(me,2),Ze=ve[0],be=ve[1],ye=(0,b.useQueryClient)(),we=(0,b.useQuery)({queryKey:z,queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/reference/get-mortgagee?mortgageeSearch=".concat(F.get("mortgageeSearch")),{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){console.log(e),he(null===e||void 0===e?void 0:e.data.mortgagee.mortgagee)}}),Se=we.data,Ce=we.isLoading,je=(0,b.useMutation)({mutationKey:z,mutationFn:function(e){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.mode||"delete"!==t.mode){e.next=4;break}return e.next=3,N.post("/reference/delete-mortgagee",t,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 3:case 8:case 12:return e.abrupt("return",e.sent);case 4:if(!Ze){e.next=9;break}return delete t.mode,e.next=8,N.post("/reference/update-mortgagee",t,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 9:return delete t.mode,e.next=12,N.post("/reference/add-mortgagee",t,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return ye.invalidateQueries(z),w().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});w().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),ke=je.mutate,Me=je.isLoading,Ie=je.variables;(0,l.useEffect)((function(){if(""!==F.get("selected")){var e=F.get("selected"),t=new Set([e]),n=null===pe||void 0===pe?void 0:pe.filter((function(e){return t.has(e.Mortgagee.toString())}))[0];n&&L(_,n)}}),[pe,F]);var Ae=function(e){var t=e.name,n=e.value;_({type:"UPDATE_FIELD",field:t,value:n})},Be=function(e){var t=e.target,n=t.name,o=t.value;_({type:"UPDATE_FIELD",field:n,value:o})};console.log(Se);var Ee=(0,C.throttle)((function(e){J(!0);var t=e.target.value;O((function(e){return e.set("mortgageeSearch",t),e})),N.get("/reference/search-mortgagee?mortgageeSearch=".concat(t),{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}}).then((function(e){console.log(e),e.data.success&&(J(!1),he(e.data.mortgagee))}))}),300);return(0,B.jsxs)(l.Fragment,{children:[(0,B.jsx)(s.Z,{children:(0,B.jsx)(u.Z,{variant:"h5",sx:{marginBottom:"10px"},children:"Mortgagee Details"})}),(0,B.jsxs)(s.Z,{sx:function(e){return(0,a.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,B.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"},children:(0,B.jsx)(d.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:F.get("mortgageeSearch"),onChange:Ee})}),q?(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,B.jsx)(g.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-mortgagee?mortgageeSearch=".concat(F.get("mortgageeSearch"),"&isAll=true"),"Mortgagee-All.xlsx",N,K)}))},children:"Export All"}),(0,B.jsx)(g.Z,{variant:"outlined",color:"success",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-mortgagee?mortgageeSearch=".concat(F.get("mortgageeSearch"),"&isAll=false"),"Mortgagee-Search.xlsx",N,K)}))},size:"small",children:"Export Table"}),(0,B.jsx)(g.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return Q(!1)},children:"Cancel"})]}):(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,B.jsx)("div",{children:(0,B.jsx)(I.L,{setExportMode:Q})}),!ne&&(0,B.jsx)(g.Z,{variant:"contained",startIcon:(0,B.jsx)(p.Z,{}),id:"entry-header-save-button",onClick:function(){var e;ce(!0),oe(!0),be(!1),O((function(e){return e.set("policySearch",""),e.set("selected",""),e})),null===(e=document.getElementById("reset-data-grid-selection"))||void 0===e||e.click()},children:"New"}),(0,B.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,B.jsx)(g.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&(0,S.D)(300).then((function(){var e;null===(e=xe.current)||void 0===e||e.click()}))}))},disabled:Me&&void 0===Ie.mode||!ne,startIcon:(0,B.jsx)(M.Z,{}),children:"Save"}),Me&&void 0===Ie.mode&&(0,B.jsx)(f.Z,{size:24,sx:{color:j.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),ne&&(0,B.jsx)(g.Z,{variant:"contained",startIcon:(0,B.jsx)(k.Z,{}),color:"error",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){var t;e.isConfirmed&&(oe(!1),ce(!1),de(!1),L(_,E),null===(t=document.getElementById("reset-data-grid-selection"))||void 0===t||t.click(),be(!1),O((function(e){return e.set("policySearch",""),e.set("selected",""),e})))}))},children:"Cancel"}),(0,B.jsx)(g.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:v.Z[500],"&:hover":{backgroundColor:v.Z[600]}},disabled:!ue,startIcon:(0,B.jsx)(h.Z,{}),onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&ke({Mortgagee:F.get("selected"),mode:"delete"})}))},children:"Delete"})]})})]}),!q&&(0,B.jsxs)("form",{onSubmit:function(e){return(y=y||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),ke((0,c.Z)((0,c.Z)({},H),{},{mode:""}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,B.jsx)(s.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:!Ce&&(0,B.jsxs)(l.Fragment,{children:[(0,B.jsx)(A.Z,{disabled:!ae,value:H.Policy,onChange:function(e,t){Ae({name:"Policy",value:t})},size:"small",freeSolo:!0,disableClearable:!0,options:Se.data.mortgagee.policy.map((function(e){return e.Policy})),getOptionLabel:function(e){return e},sx:function(e){return(0,a.Z)({width:300},e.breakpoints.down("md"),{width:"100%"})},renderInput:function(e){return(0,B.jsx)(d.Z,(0,c.Z)((0,c.Z)({},e),{},{label:"Policy",name:"Policy",InputProps:(0,c.Z)((0,c.Z)({},e.InputProps),{},{type:"search"}),onChange:Be}))}}),(0,B.jsx)(A.Z,{disabled:!ae||Ze,value:H.Mortgagee,onChange:function(e,t){Ae({name:"Mortgagee",value:t})},size:"small",freeSolo:!0,disableClearable:!0,options:Se.data.mortgagee.mortgagee.map((function(e){return e.Mortgagee})),getOptionLabel:function(e){return e},sx:function(e){return(0,a.Z)({width:700},e.breakpoints.down("md"),{width:"100%"})},renderInput:function(e){return(0,B.jsx)(d.Z,(0,c.Z)((0,c.Z)({},e),{},{label:"Mortgagee",name:"Mortgagee",InputProps:(0,c.Z)((0,c.Z)({},e.InputProps),{},{type:"search"}),onChange:Be}))}})]})}),(0,B.jsx)("button",{ref:xe,style:{display:"none"},type:"submit"})]}),(0,B.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,B.jsx)(m.Z,{mutipleSelect:q,isLoading:Me||Ce||W,dataKey:"entry",queryKey:[z],columns:D,onSelectionChange:function(e,t){if(e.length<=0)return L(_,E),O((function(e){return e.set("selected",""),e})),be(!1),ce(!1),oe(!1),void de(!1);oe(!0),de(!0),ce(!0),be(!0);var n=new Set(e),o=t.filter((function(e){return n.has(e.Mortgagee.toString())}));O((function(t){return t.set("selected",e[0]),t})),L(_,o[0])},getRowId:function(e){return e.Mortgagee},rows:pe,setRows:he})})]})}function L(e,t){Object.entries(t).forEach((function(t){var n=(0,i.Z)(t,2),o=n[0],r=n[1];e({type:"UPDATE_FIELD",field:o,value:r})}))}},7247:function(e,t,n){var o=n(4836);t.Z=void 0;var r=o(n(5649)),i=n(184),a=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=3783.4293ebc1.chunk.js.map