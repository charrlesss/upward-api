"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[7303],{1957:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(1413),o=n(9439),i=n(2791),r=n(4554),l=n(7482),c=n(6212),s=n(1128),d=n(184);function u(e){var t=e.onSelectionChange,n=e.initialPage,u=void 0===n?10:n,p=e.columns,m=e.rowHeight,f=void 0===m?35:m,h=e.getRowId,g=e.rows,v=e.isLoading,x=e.mutipleSelect,y=e.height,b=void 0===y?"500px":y,Z=(0,s.Z)(),C=Z.searchParams,w=Z.setSearchParams,j=(0,i.useState)([]),P=(0,o.Z)(j,2),S=P[0],A=P[1],I=(0,i.useState)(!1),_=(0,o.Z)(I,2),k=_[0],D=_[1],M=i.useState({pageSize:parseInt(C.get("pageSize"))||100,page:parseInt(C.get("page"))||1}),z=(0,o.Z)(M,2),T=z[0],F=z[1];if((0,i.useEffect)((function(){A(""===C.get("selected")?[]:[C.get("selected")])}),[C]),(0,i.useEffect)((function(){t(S,g)}),[k]),v){var N=p.map((function(e){return"id"===e.field&&(e=(0,a.Z)((0,a.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,d.jsx)(r.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,d.jsx)(c._$,{slots:{loadingOverlay:l.Z},loading:v,rows:[{id:"Loading..."}],columns:N})})}return(0,d.jsxs)(r.Z,{sx:{height:b,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,d.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){A([])},children:"reset"}),x?(0,d.jsx)(c._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:l.Z},loading:v,rowHeight:f,rows:g,columns:p,initialState:{pagination:{paginationModel:{page:0,pageSize:u}}},pageSizeOptions:[u,25,50,100],getRowId:h}):(0,d.jsx)(c._$,{slots:{loadingOverlay:l.Z},loading:v,rowHeight:f,rows:g,columns:p,initialState:{pagination:{paginationModel:{page:0,pageSize:u}}},checkboxSelection:!0,pageSizeOptions:[u,25,50,100],onRowDoubleClick:function(e){D((function(e){return!e})),A((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(S),a=e.filter((function(e){return!n.has(e)}));t(a,g),A(a)}else t(e,g),A(e)},disableRowSelectionOnClick:!0,rowSelectionModel:S,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:h,paginationModel:T,onPaginationModelChange:function(e){F(e),w((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},3784:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(1413),o=n(5987),i=(n(2791),n(1652)),r=n(4246),l=n(3777),c=n(184),s=["label","name","onChange","value"];function d(e){var t=e.label,n=e.name,d=e.onChange,u=e.value,p=(0,o.Z)(e,s);return(0,c.jsx)(i._,{dateAdapter:r.H,children:(0,c.jsx)(l.M,(0,a.Z)({value:u,onChange:d,slotProps:{textField:{size:"small",label:t,name:n}}},p))})}},1582:function(e,t,n){n.d(t,{Z:function(){return p}});n(2791);var a=n(1957),o=n(8447),i=n(4554),r=n(3400),l=n(890),c=n(8550),s=n(9823),d=n(184),u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function p(e){var t=e.height,n=e.isLoading,p=e.queryKey,m=e.columns,f=e.onSelectionChange,h=e.setRows,g=e.rows,v=e.id,x=e.onCloseModal,y=e.showModal,b=e.onClickCloseIcon,Z=e.searchOnChange;return(0,d.jsx)(o.Z,{open:y,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(i.Z,{sx:u,children:[(0,d.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,d.jsx)(r.Z,{"aria-label":"search-client",color:"secondary",onClick:b,children:(0,d.jsx)(s.Z,{})})}),(0,d.jsx)(l.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:"Search Clients"}),(0,d.jsx)(c.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:Z}),(0,d.jsx)("div",{style:{position:"relative",height:"".concat(t+20,"px")},children:(0,d.jsx)(a.Z,{height:"".concat(t,"px"),mutipleSelect:!1,isLoading:n,queryKey:[p],columns:m,onSelectionChange:f,getRowId:function(e){return e["".concat(v)].toString()},rows:g,setRows:h})})]})})}},7303:function(e,t,n){n.r(t),n.d(t,{CGLContext:function(){return H},default:function(){return ee},vpolicyColumn:function(){return $}});var a=n(4165),o=n(5861),i=n(9439),r=n(4942),l=n(1413),c=n(2791),s=n(4554),d=n(6151),u=n(3239),p=n(7),m=n(4378),f=n(2419),h=n(3380),g=n(1933),v=n(9823),x=n(3329),y=n(1830),b=n.n(y),Z=n(7247),C=n(8096),w=n(829),j=n(8406),P=n(3786),S=n(2326),A=n(1582),I=n(8307),_=n(3433),k=n(8550),D=n(3400),M=n(4721),z=n(1421),T=n(3784),F=n(184),N=[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],B=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],O="vehicle-policy",L="agent-policy";function R(){var e=(0,c.useContext)(H),t=e.state,n=e.handleInputChange,a=e.isLoading,o=e.clientRows,r=e.setClientRows,l=e.customInputchange,s=e.myAxios,u=e.user,p=e.agentRows,m=e.setAgentRows,f=e.data,h=e.isAddOrEditMode,g=e.clientLoading,v=e.agentLoading,x=e.computation,y=(0,c.useState)(!1),b=(0,i.Z)(y,2),Z=b[0],S=b[1],I=(0,c.useState)(!1),R=(0,i.Z)(I,2),G=R[0],q=R[1];return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{style:{display:"grid",gap:"20px",gridTemplateAreas:'"content1 content2" "content3 content4" "content5 content5"'},children:[(0,F.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",gridArea:"content1",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,F.jsx)("legend",{style:{color:"#065f46"},children:"Insurer Information"}),(0,F.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Client ID",name:"client_id",value:t.client_id,onChange:n,InputProps:{readOnly:!0}}),(0,F.jsx)(D.Z,{disabled:h||g,"aria-label":"search-client",color:"secondary",onClick:function(){return S(!0)},children:(0,F.jsx)(z.Z,{})})]}),(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Client Name",name:"client_name",value:t.client_name,onChange:n,InputProps:{readOnly:!0}}),(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Client Address",rows:3,multiline:!0,name:"client_address",value:t.client_address,onChange:n,InputProps:{readOnly:!0}})]}),(0,F.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",gridArea:"content2",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,F.jsx)("legend",{style:{color:"#065f46"},children:"Agent Information"}),(0,F.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Agent ID",name:"agent_id",value:t.agent_id,onChange:n,InputProps:{readOnly:!0}}),(0,F.jsx)(D.Z,{disabled:h||v,"aria-label":"search-client",color:"secondary",onClick:function(){return q(!0)},children:(0,F.jsx)(z.Z,{})})]}),(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Agent Name",name:"agent_name",value:t.agent_name,onChange:n,InputProps:{readOnly:!0}}),(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Commission",name:"agent_com",value:t.agent_com,onChange:n})]}),(0,F.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",marginBottom:"10px"},children:[(0,F.jsx)("legend",{style:{color:"#065f46"},children:"PA Policy"}),(0,F.jsxs)(C.Z,{size:"small",fullWidth:!0,disabled:h,children:[(0,F.jsx)(w.Z,{id:"PolicyAccount",children:"Account"}),(0,F.jsx)(j.Z,{labelId:"PolicyAccount",value:t.PolicyAccount,label:"Account",name:"PolicyAccount",onChange:n,children:[{Account:""}].concat((0,_.Z)(null===f||void 0===f?void 0:f.data.cglPolicy.policy_account)).map((function(e,t){return(0,F.jsx)(P.Z,{value:e.Account,children:e.Account},t)}))})]}),(0,F.jsx)(k.Z,{disabled:h,fullWidth:!0,variant:"outlined",size:"small",label:"Policy No",name:"PolicyNo",value:t.PolicyNo,onChange:n})]}),(0,F.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,F.jsx)("legend",{style:{color:"#065f46"},children:"Period of Insurance"}),(0,F.jsx)(T.Z,{disabled:h,label:"Date From",onChange:function(e){l(e,"DateFrom")},value:new Date(t.DateFrom)}),(0,F.jsx)(T.Z,{disabled:h,label:"Date To",onChange:function(e){l(e,"DateTo")},value:new Date(t.DateTo)}),(0,F.jsx)(T.Z,{label:"Date Issued",name:"DateIssued",onChange:function(e){l(e,"DateIssued")},value:new Date(t.DateIssued),disabled:h})]}),(0,F.jsxs)("fieldset",{style:{display:"flex",gap:"20px",gridArea:"content5",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,gap:"10px"},children:[(0,F.jsx)(k.Z,{sx:{flex:1},disabled:h,variant:"outlined",size:"small",label:"Premises Operations",name:"premisisOperation",value:t.premisisOperation,onChange:n,multiline:!0,rows:10}),(0,F.jsx)(k.Z,{disabled:h,variant:"outlined",size:"small",label:"BL Premium",name:"blPremium",value:t.blPremium,onChange:n}),(0,F.jsx)(k.Z,{disabled:h,variant:"outlined",size:"small",label:"PD Premium",name:"pdPremium",value:t.pdPremium,onChange:n})]}),(0,F.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,F.jsx)("legend",{children:"Premiums"}),(0,F.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px"},children:(0,F.jsx)(d.Z,{disabled:h,size:"small",variant:"contained",color:"primary",onClick:function(){x()},children:"Compute"})}),(0,F.jsx)(k.Z,{disabled:h,required:!0,variant:"outlined",size:"small",label:"Net Premium",name:"netPremium",value:t.netPremium,onChange:n}),(0,F.jsx)(k.Z,{disabled:h,required:!0,variant:"outlined",size:"small",label:"Vat",name:"vat",value:t.vat,onChange:n}),(0,F.jsx)(k.Z,{disabled:h,required:!0,variant:"outlined",size:"small",label:"Doc Stamp",name:"docStamp",value:t.docStamp,onChange:n}),(0,F.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative"},children:[(0,F.jsx)(k.Z,{sx:{width:"80px"},disabled:h,required:!0,variant:"outlined",size:"small",name:"localGovTaxPercent",value:t.localGovTaxPercent,onChange:n}),(0,F.jsx)(k.Z,{disabled:h,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"localGovTax",value:t.localGovTax,onChange:n,style:{flex:1}})]}),(0,F.jsx)(M.Z,{color:"secondary"}),(0,F.jsx)(k.Z,{disabled:h,required:!0,variant:"outlined",size:"small",label:"Total Due",name:"totalDue",value:t.totalDue,onChange:n})]})]})]}),(0,F.jsx)(A.Z,{showModal:Z,onCloseModal:function(){S(!1)},onClickCloseIcon:function(){S(!1)},searchOnChange:function(e){s.get("/task/production/search-client-vehicle-policy?clientSearch=".concat(e.target.value),{headers:{Authorization:"Bearer ".concat(null===u||void 0===u?void 0:u.accessToken)}}).then((function(e){var t;if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));r(null===e||void 0===e||null===(t=e.data.vehiclePolicy)||void 0===t?void 0:t.clients)}))},height:300,isLoading:a,queryKey:O,columns:N,onSelectionChange:function(e,t){if(!(e.length<=0)){var n=new Set(e),a=t.filter((function(e){return n.has(e.entry_client_id.toString())}));a.length<=0||(l(a[0].entry_client_id,"client_id"),l(a[0].fullname,"client_name"),l(a[0].address,"client_address"),S(!1))}},id:"entry_client_id",rows:o,setRows:r}),(0,F.jsx)(A.Z,{showModal:G,onCloseModal:function(){q(!1)},onClickCloseIcon:function(){q(!1)},searchOnChange:function(e){s.get("/task/production/search-agent-vehicle-policy?agentSearch=".concat(e.target.value),{headers:{Authorization:"Bearer ".concat(null===u||void 0===u?void 0:u.accessToken)}}).then((function(e){var t;if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));m(null===e||void 0===e||null===(t=e.data.vehiclePolicy)||void 0===t?void 0:t.agents)}))},height:300,isLoading:a,queryKey:L,columns:B,onSelectionChange:function(e,t){if(!(e.length<=0)){var n=new Set(e),a=t.filter((function(e){return n.has(e.entry_agent_id.toString())}));a.length<=0||(l(a[0].entry_agent_id,"agent_id"),l(a[0].fullname,"agent_name"),q(!1))}},id:"entry_agent_id",rows:p,setRows:m})]})}var G={sub_account:"HO",client_id:"",client_name:"",client_address:"",agent_id:"",agent_name:"",agent_com:"0.00",PolicyAccount:"",PolicyNo:"",DateFrom:new Date,DateTo:new Date,DateIssued:new Date,premisisOperation:"",blPremium:"0.00",pdPremium:"0.00",netPremium:"0.00",vat:"0.00",docStamp:"0.00",localGovTaxPercent:"0.75",localGovTax:"0.00",totalDue:"0.00",paActioMode:""},q="CGLPolicyInitialState",E=function(e,t){if("UPDATE_FIELD"===t.type){var n=(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t.field,t.value));return localStorage.setItem(q,JSON.stringify(n)),n}return e},H=(0,c.createContext)({}),V=(0,I.Z)(G,q),K="cgl-search",Q="clients",W="agents",Y="cgl-policy",U="cgl-policy",J="cgl-policy",$=[{field:"DateIssued",headerName:"Date",width:200},{field:"PolicyNo",headerName:"Policy No",width:250},{field:"Account",headerName:"Account",width:170},{field:"client_fullname",headerName:"Full Name",flex:1}],X="vehicle-policy";function ee(){var e,t,n,l,y,I,_,k,D,M,z=(0,c.useReducer)(E,V),T=(0,i.Z)(z,2),N=T[0],B=T[1],O=(0,c.useContext)(h.V),L=O.myAxios,q=O.user,ee=(0,c.useState)([]),te=(0,i.Z)(ee,2),ne=te[0],ae=te[1],oe=(0,c.useState)([]),ie=(0,i.Z)(oe,2),re=ie[0],le=ie[1],ce=(0,c.useState)([]),se=(0,i.Z)(ce,2),de=se[0],ue=se[1],pe=(0,c.useState)(!1),me=(0,i.Z)(pe,2),fe=me[0],he=me[1],ge=(0,c.useState)(!1),ve=(0,i.Z)(ge,2),xe=ve[0],ye=ve[1],be=(0,c.useState)(!1),Ze=(0,i.Z)(be,2),Ce=Ze[0],we=Ze[1],je=(0,g.useQueryClient)(),Pe=""===N.paActioMode,Se=(0,g.useQuery)({queryKey:K,queryFn:function(){return(e=e||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/task/production/search-cgl-policy?searchCglPolicy=",{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data;ue(t.cglPolicy)}}),Ae=Se.isLoading,Ie=(0,g.useQuery)({queryKey:Q,queryFn:function(){return(t=t||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/task/production/search-client-fire-policy?searchClient=",{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data;ae(t.clients)}}),_e=Ie.isLoading,ke=(0,g.useQuery)({queryKey:W,queryFn:function(){return(n=n||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/task/production/search-agent-fire-policy?searchAgent=",{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data;le(t.agents)}}),De=ke.isLoading,Me=(0,g.useQuery)({queryKey:Y,queryFn:function(){return(l=l||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/task/production/get-cgl-policy",{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),ze=Me.data,Te=Me.isLoading,Fe=(0,g.useMutation)({mutationKey:U,mutationFn:function(e){return(y=y||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==N.paActioMode){e.next=4;break}return e.next=3,L.post("/task/production/update-cgl-policy",t,{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,L.post("/task/production/add-cgl-policy",t,{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(I=I||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=4;break}return e.next=3,Ve();case 3:return e.abrupt("return",b().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}).then((function(){"delete"!==N.paActioMode&&He(G,!0)})));case 4:b().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ne=Fe.mutate,Be=Fe.isLoading,Oe=(0,g.useMutation)({mutationKey:J,mutationFn:function(e){return(_=_||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("/task/production/delete-cgl-policy",t,{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(k=k||(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=4;break}return e.next=3,Ve();case 3:return e.abrupt("return",b().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}).then((function(){He(G,!0)})));case 4:b().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Le=Oe.mutate,Re=Oe.isLoading,Ge=function(e){var t=e.target,n=t.name,a=t.value;B({type:"UPDATE_FIELD",field:n,value:a})},qe=function(e,t){B({type:"UPDATE_FIELD",field:t,value:e})};function Ee(){var e=parseFloat(N.localGovTaxPercent)/100,t=parseFloat(N.netPremium);qe((.12*t).toFixed(2),"vat"),qe((.125*t).toFixed(2),"docStamp"),qe((e*t).toFixed(2),"localGovTax"),qe(t.toFixed(2),"netPremium"),qe((parseFloat(t.toFixed(2))+parseFloat((.12*t).toFixed(2))+parseFloat((.125*t).toFixed(2))+parseFloat((e*t).toFixed(2))).toFixed(2),"totalDue")}function He(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.form_type=N.form_type,e.form_action=N.form_action,e.prem_text_one=N.prem_text_one,e.prem_text_two=N.prem_text_two,t||(e.paActioMode=N.paActioMode),Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1];qe(a,n)}))}function Ve(){return(D=D||(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([je.invalidateQueries(K),je.invalidateQueries(Q),je.invalidateQueries(W),je.invalidateQueries(Y),je.invalidateQueries(U),je.invalidateQueries(J)]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Te?(0,F.jsx)("h1",{children:"Loading...."}):(0,F.jsxs)(H.Provider,{value:{clientLoading:_e,agentLoading:De,state:N,handleInputChange:Ge,customInputchange:qe,Mortgagee:Ce,setMortgagee:we,isLoading:Te,clientRows:ne,setClientRows:ae,myAxios:L,user:q,agentRows:re,setAgentRows:le,data:ze,computation:Ee,isAddOrEditMode:Pe},children:[(0,F.jsxs)(s.Z,{sx:function(e){return(0,r.Z)({display:"flex",alignItems:"center",columnGap:"20px",marginBottom:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1})},children:[(0,F.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"}}),(0,F.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===N.paActioMode&&(0,F.jsx)(d.Z,{variant:"contained",startIcon:(0,F.jsx)(f.Z,{}),onClick:function(){qe("add","paActioMode")},children:"New"}),(0,F.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,F.jsx)(d.Z,{color:"primary",variant:"contained",type:"submit",onClick:function(){return""===N.client_id||null===N.client_id?b().fire("Unable to save! Invalid IDNo.","you missed the Client Id Field?","error"):""===N.PolicyAccount||null===N.PolicyAccount?b().fire("Unable to save! Please select Account.","you missed the Account Field?","error"):""===N.PolicyNo||null===N.PolicyNo?b().fire("Unable to save! Invalid Policy No.","you missed the Policy No Field?","error"):void b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Save it!"}).then((function(e){e.isConfirmed&&(console.log(N),Ne(N))}))},disabled:Be||""===N.paActioMode,startIcon:(0,F.jsx)(x.Z,{}),children:"Save"}),Be&&"add"===N.paActioMode&&(0,F.jsx)(u.Z,{size:24,sx:{color:p.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),""!==N.paActioMode&&(0,F.jsx)(d.Z,{variant:"contained",startIcon:(0,F.jsx)(v.Z,{}),color:"error",onClick:function(){b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(qe("","paActioMode"),He(G,!0))}))},children:"Cancel"}),(0,F.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,F.jsx)(d.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:m.Z[500],"&:hover":{backgroundColor:m.Z[600]}},disabled:"delete"!==N.paActioMode,startIcon:(0,F.jsx)(Z.Z,{}),onClick:function(){b().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&Le({PolicyAccount:N.PolicyAccount,PolicyNo:N.PolicyNo,policyType:N.policyType})}))},children:"Delete"}),Re&&(0,F.jsx)(u.Z,{size:24,sx:{color:p.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})})]}),(0,F.jsxs)("div",{style:{marginBottom:"5px",display:"flex",gap:"10px"},children:[(0,F.jsx)(d.Z,{size:"small",variant:"outlined",startIcon:(0,F.jsx)(S.Z,{}),onClick:function(){if(""===N.paActioMode||null===N.paActioMode)return he(!0);b().fire({title:"Are you sure?",text:"Your in Add mode, If you proceed the data you input will replace existing data. Are you sure you want to continue",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&(qe("","paActioMode"),He(G,!0),he(!0))}))},disabled:Ae||xe,children:"Search Policy"}),(0,F.jsxs)(C.Z,{size:"small",sx:function(e){return{width:"150px"}},children:[(0,F.jsx)(w.Z,{id:"subAccount",children:"Sub Account"}),(0,F.jsx)(j.Z,{size:"small",labelId:"subAccount",label:"subAccount",name:"sub_account",value:N.sub_account,onChange:function(e){Ge(e)},children:(null===ze||void 0===ze||null===(M=ze.data)||void 0===M?void 0:M.cglPolicy.sub_account).map((function(e,t){return(0,F.jsx)(P.Z,{value:e.Acronym.trim(),children:e.Acronym},t)}))})]})]}),(0,F.jsx)(R,{}),(0,F.jsx)(A.Z,{showModal:fe,onCloseModal:function(){he(!1)},onClickCloseIcon:function(){he(!1)},searchOnChange:function(e){ye(!0),L.get("/task/production/search-cgl-policy?searchCglPolicy=".concat(e.target.value),{headers:{Authorization:"Bearer ".concat(null===q||void 0===q?void 0:q.accessToken)}}).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));ue(null===e||void 0===e?void 0:e.data.cglPolicy),ye(!1)}))},height:300,isLoading:Ae||xe,queryKey:X,columns:$,onSelectionChange:function(e,t){if(!(e.length<=0)){var n=new Set(e),a=t.filter((function(e){return n.has(e.PolicyNo.toString())}));if(!(a.length<=0)){var o=a[0],i=o.PolicyNo,r=o.Account,l=o.PeriodFrom,c=o.PeriodTo,s=o.Location,d=o.IDNo,u=o.SubAcct,p=o.DateIssued,m=o.TotalPremium,f=o.AgentID,h=o.AgentCom,g=o.client_fullname,v=o.agent_fullname,x=o.address,y=o.LimitA,b=o.LimitB;qe(u,"sub_account"),qe(d,"client_id"),qe(g,"client_name"),qe(x,"client_address"),qe(f,"agent_id"),qe(v,"agent_name"),qe(h,"agent_com"),qe(r,"PolicyAccount"),qe(i,"PolicyNo"),qe(l,"DateFrom"),qe(c,"DateTo"),qe(p,"DateIssued"),qe(s,"premisisOperation"),qe(y,"blPremium"),qe(b,"pdPremium"),N.netPremium=m,Ee(),qe("delete","paActioMode"),he(!1)}}},id:"PolicyNo",rows:de,setRows:ue})]})}},8307:function(e,t,n){function a(e,t){var n=JSON.stringify(e),a=localStorage.getItem(t),o=a||n;localStorage.setItem(t,o);return["VPolicyInitialState","BPolicyInitialState","FPolicyInitialState","MPolicyInitialState","MSPRPolicyInitialState","PAPolicyInitialState","CGLPolicyInitialState"].forEach((function(e){e!==t&&localStorage.removeItem(e)})),localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):e}n.d(t,{Z:function(){return a}})},2419:function(e,t,n){var a=n(4836);t.Z=void 0;var o=a(n(5649)),i=n(184),r=(0,o.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=r},9823:function(e,t,n){var a=n(4836);t.Z=void 0;var o=a(n(5649)),i=n(184),r=(0,o.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=r},7247:function(e,t,n){var a=n(4836);t.Z=void 0;var o=a(n(5649)),i=n(184),r=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=r},1421:function(e,t,n){var a=n(4836);t.Z=void 0;var o=a(n(5649)),i=n(184),r=(0,o.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=r},3329:function(e,t,n){var a=n(4836);t.Z=void 0;var o=a(n(5649)),i=n(184),r=(0,o.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=r},3786:function(e,t,n){n.d(t,{Z:function(){return S}});var a=n(4942),o=n(3366),i=n(7462),r=n(2791),l=n(3733),c=n(4419),s=n(2065),d=n(6934),u=n(1402),p=n(6199),m=n(7479),f=n(162),h=n(2071),g=n(133),v=n(6014),x=n(9849),y=n(5878),b=n(1217);function Z(e){return(0,b.Z)("MuiMenuItem",e)}var C=(0,y.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),w=n(184),j=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],P=(0,d.ZP)(m.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,o=e.ownerState;return(0,i.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,a.Z)(t,"&.".concat(C.selected),(0,a.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(C.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,a.Z)(t,"&.".concat(C.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,a.Z)(t,"&.".concat(C.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,a.Z)(t,"&.".concat(C.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,a.Z)(t,"& + .".concat(g.Z.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,a.Z)(t,"& + .".concat(g.Z.inset),{marginLeft:52}),(0,a.Z)(t,"& .".concat(x.Z.root),{marginTop:0,marginBottom:0}),(0,a.Z)(t,"& .".concat(x.Z.inset),{paddingLeft:36}),(0,a.Z)(t,"& .".concat(v.Z.root),{minWidth:36}),t),!o.dense&&(0,a.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),o.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,a.Z)({},"& .".concat(v.Z.root," svg"),{fontSize:"1.25rem"})))})),S=r.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiMenuItem"}),a=n.autoFocus,s=void 0!==a&&a,d=n.component,m=void 0===d?"li":d,g=n.dense,v=void 0!==g&&g,x=n.divider,y=void 0!==x&&x,b=n.disableGutters,C=void 0!==b&&b,S=n.focusVisibleClassName,A=n.role,I=void 0===A?"menuitem":A,_=n.tabIndex,k=n.className,D=(0,o.Z)(n,j),M=r.useContext(p.Z),z=r.useMemo((function(){return{dense:v||M.dense||!1,disableGutters:C}}),[M.dense,v,C]),T=r.useRef(null);(0,f.Z)((function(){s&&T.current&&T.current.focus()}),[s]);var F,N=(0,i.Z)({},n,{dense:z.dense,divider:y,disableGutters:C}),B=function(e){var t=e.disabled,n=e.dense,a=e.divider,o=e.disableGutters,r=e.selected,l=e.classes,s={root:["root",n&&"dense",t&&"disabled",!o&&"gutters",a&&"divider",r&&"selected"]},d=(0,c.Z)(s,Z,l);return(0,i.Z)({},l,d)}(n),O=(0,h.Z)(T,t);return n.disabled||(F=void 0!==_?_:-1),(0,w.jsx)(p.Z.Provider,{value:z,children:(0,w.jsx)(P,(0,i.Z)({ref:O,role:I,tabIndex:F,component:m,focusVisibleClassName:(0,l.Z)(B.focusVisible,S),className:(0,l.Z)(B.root,k)},D,{ownerState:N,classes:B}))})}))},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=7303.93e14f72.chunk.js.map