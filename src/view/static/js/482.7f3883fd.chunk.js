"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[482],{341:function(e,t,n){n.d(t,{L:function(){return u}});var i=n(9439),o=n(2791),r=n(6151),a=n(5117),c=n(3786),s=n(7),l=n(184);function u(e){var t=e.setExportMode,n=o.useState(null),u=(0,i.Z)(n,2),d=u[0],f=u[1],x=Boolean(d),h=function(){f(null)};return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(r.Z,{id:"basic-button","aria-controls":x?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:function(e){f(e.currentTarget),t(!0)},variant:"contained",sx:{backgroundColor:s.Z[500],"&:hover":{backgroundColor:s.Z[600]}},children:"Export"}),(0,l.jsxs)(a.Z,{id:"basic-menu",anchorEl:d,open:x,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(c.Z,{onClick:h,children:"Export as Excel All Data "}),(0,l.jsxs)(c.Z,{onClick:h,children:["Export as Excel Only Data in Table"," "]}),(0,l.jsx)(c.Z,{onClick:h,children:"Print Data in Table"})]})]})}},3263:function(e,t,n){n.d(t,{v:function(){return i}});var i=(0,n(2791).createContext)({setRows:function(){},rows:[],setLoadingSearch:function(){},loadingSearch:!1,setSaveButtonDisabled:function(){},saveButtonDisabled:!1,setExportMode:function(){},exportMode:!1})},7432:function(e,t,n){n.d(t,{I:function(){return A},Z:function(){return z}});var i=n(4942),o=n(4165),r=n(5861),a=n(2791),c=n(763),s=n(4554),l=n(890),u=n(8550),d=n(6151),f=n(3239),x=n(1918),h=n(2419),p=n(7247),m=n(1933),y=n(6166),v=n(3380),b=n(9823),g=n(1128),Z=n(1830),C=n.n(Z),j=n(3263),S=n(9018),k=n(7),B=n(4378),w=n(3329),E=n(341),I=n(184),D={Client:{sign:"C",type:"entry client",id:"entry_client_id"},Employee:{sign:"E",type:"entry employee",id:"entry_employee_id"},Agent:{sign:"A",type:"entry agent",id:"entry_agent_id"},"Fixed Assets":{sign:"FA",type:"entry fixed assets",id:"entry_fixed_assets_id"},Supplier:{sign:"S",type:"entry supplier",id:"entry_supplier_id"},Others:{sign:"O",type:"entry others",id:"entry_others_id"}};function A(e,t){var n=document.querySelector("form [name='".concat(D[e].id,"']")),i=document.querySelector("form #".concat(D[e].id,"-text"));i&&(i.style.color="#083344",i.textContent=t),n&&(n.value=t)}function z(e){var t,x=e.classification,Z=e.handleClick,z=e.components,_=e.setSave,M=e.save,T=e.setDeletes,F=e.deletes,L=e.cancel,Y=e.setCancel,G=(0,a.useContext)(v.V),O=G.myAxios,R=G.user,V=(0,g.Z)(),q=V.searchParams,N=V.setSearchParams,H=(0,a.useContext)(j.v),W=H.setLoadingSearch,K=H.setRows,U=H.setSaveButtonDisabled,J=H.saveButtonDisabled,Q=H.exportMode,X=H.setExportMode,$=(0,c.throttle)((function(e){W(!0);var t=e.target.value;N((function(e){return e.set("entrySearch",t),e})),O.get("/reference/search-entry?entrySearch=".concat(t,"&entry=").concat(x),{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}}).then((function(e){e.data.success&&(W(!1),K(e.data.entry))}))}),300),ee=(0,m.useMutation)({mutationKey:D[x].id,mutationFn:function(e){return(t=t||(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.RequestNewID)(O,R,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){A(x,e.data.generateID),_(!0),Y(!0)}}),te=ee.mutate,ne=ee.isLoading;return(0,I.jsxs)(a.Fragment,{children:[(0,I.jsx)("button",{id:"enable-save-entry",style:{display:"none",position:"absolute"},onClick:function(){U(!1)}}),(0,I.jsxs)(s.Z,{children:[(0,I.jsx)(l.Z,{variant:"h5",sx:{marginBottom:"10px"},children:"Identification Detail"}),(0,I.jsx)(P,{classification:x,ClassificationData:z,handleClick:Z,disabled:ne})]}),(0,I.jsxs)(s.Z,{sx:function(e){return(0,i.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,I.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"},children:(0,I.jsx)(u.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",onChange:$,value:q.get("entrySearch")})}),Q?(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,I.jsx)(d.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-entry?entrySearch=".concat(q.get("entrySearch"),"&entry=").concat(x,"&isAll=true"),"Entry-All-".concat(x,".xlsx"),O,R)}))},children:"Export All"}),(0,I.jsx)(d.Z,{variant:"outlined",color:"success",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-entry?entrySearch=".concat(q.get("entrySearch"),"&entry=").concat(x,"&isAll=false"),"Entry-Search-".concat(x,".xlsx"),O,R)}))},size:"small",children:"Export Table"}),(0,I.jsx)(d.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return X(!1)},children:"Cancel"})]}):(0,I.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,I.jsx)("div",{children:(0,I.jsx)(E.L,{setExportMode:X})}),!M&&(0,I.jsx)(d.Z,{variant:"contained",startIcon:(0,I.jsx)(h.Z,{}),onClick:function(){var e,t,n;te(D[x]),null===(e=document.getElementById("reset-data-grid-selection"))||void 0===e||e.click(),T(!1),_(!0),Y(!0),N((function(e){return e.set("selected",""),e})),null===(t=document.getElementById("".concat(x,"-reset")))||void 0===t||t.click(),null===(n=document.getElementById("enable-fields"))||void 0===n||n.click()},disabled:ne,id:"entry-header-save-button",children:"New"}),(0,I.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,I.jsx)(d.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){C().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&(U(!0),U(document.getElementById("Form-".concat(x)).checkValidity()),(0,S.D)(300).then((function(){var e;null===(e=document.getElementById("".concat(x)))||void 0===e||e.click()})))}))},disabled:ne||!M||J,startIcon:(0,I.jsx)(w.Z,{}),children:"Save"}),J&&(0,I.jsx)(f.Z,{size:24,sx:{color:k.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),L&&(0,I.jsx)(d.Z,{variant:"contained",startIcon:(0,I.jsx)(b.Z,{}),onClick:function(){C().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){var t,n,i;e.isConfirmed&&(_(!1),T(!1),Y(!1),null===(t=document.getElementById("".concat(x,"-reset")))||void 0===t||t.click(),null===(n=document.getElementById("reset-data-grid-selection"))||void 0===n||n.click(),null===(i=document.getElementById("disable-fields"))||void 0===i||i.click())}))},color:"error",children:"Cancel"}),(0,I.jsx)(d.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:B.Z[500],"&:hover":{backgroundColor:B.Z[600]}},startIcon:(0,I.jsx)(p.Z,{}),disabled:ne||!F,onClick:function(){C().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){var t;e.isConfirmed&&(null===(t=document.getElementById("delete-entry-by-id"))||void 0===t||t.click())}))},children:"Delete"})]})})]})]})}function P(e){var t=e.handleClick,n=e.ClassificationData,o=e.classification,r=e.disabled;return(0,I.jsx)(s.Z,{sx:function(e){return(0,i.Z)({display:"flex",columnGap:"5px"},e.breakpoints.down("md"),{flexWrap:"wrap",width:"100%",gap:"5px",marginBottom:"10px"})},children:n.map((function(e,n){return(0,I.jsx)(x.Z,{disabled:e.classification.includes(o)||r,color:e.classification.includes(o)?"error":"default",label:e.classification,variant:"outlined",onClick:t},n)}))})}},6166:function(e,t,n){n.r(t),n.d(t,{RequestNewID:function(){return C},default:function(){return Z},setNewStateValue:function(){return j}});var i,o=n(4165),r=n(5861),a=n(9439),c=n(2791),s=n(4554),l=n(1128),u=n(7432),d=n(3263),f=n(184),x=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(3),n.e(4754)]).then(n.bind(n,4754))})),h=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(9522)]).then(n.bind(n,9522))})),p=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(8564)]).then(n.bind(n,8564))})),m=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(8610)]).then(n.bind(n,9485))})),y=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(3),n.e(2680)]).then(n.bind(n,2680))})),v=(0,c.lazy)((function(){return Promise.all([n.e(9340),n.e(451)]).then(n.bind(n,451))})),b=[{component:function(e){return(0,f.jsx)(x,{hasSelected:e})},classification:"Client"},{component:function(e){return(0,f.jsx)(h,{hasSelected:e})},classification:"Employee"},{component:function(e){return(0,f.jsx)(p,{hasSelected:e})},classification:"Agent"},{component:function(e){return(0,f.jsx)(m,{hasSelected:e})},classification:"Fixed Assets"},{component:function(e){return(0,f.jsx)(y,{hasSelected:e})},classification:"Supplier"},{component:function(e){return(0,f.jsx)(v,{hasSelected:e})},classification:"Others"}];function g(e,t){return b.filter((function(t){return t.classification.includes(e)}))[0].component(t)}function Z(){var e=(0,c.useState)([]),t=(0,a.Z)(e,2),n=t[0],i=t[1],o=(0,c.useState)(!1),r=(0,a.Z)(o,2),x=r[0],h=r[1],p=(0,c.useState)(!1),m=(0,a.Z)(p,2),y=m[0],v=m[1],Z=(0,c.useState)(!1),C=(0,a.Z)(Z,2),j=C[0],S=C[1],k=(0,c.useState)(!1),B=(0,a.Z)(k,2),w=B[0],E=B[1],I=(0,c.useState)(!1),D=(0,a.Z)(I,2),A=D[0],z=D[1],P=(0,l.Z)(),_=P.searchParams,M=P.setSearchParams,T=(0,c.useState)(g(_.get("classification"),N)),F=(0,a.Z)(T,2),L=F[0],Y=F[1],G=(0,c.useState)(!1),O=(0,a.Z)(G,2),R=O[0],V=O[1],q=_.get("classification");function N(e){if(e)return z(!0),v(!0),void E(!0);z(!1),v(!1),E(!1)}return(0,f.jsx)(s.Z,{sx:{width:"100%",height:"100%"},children:(0,f.jsxs)(d.v.Provider,{value:{setExportMode:V,exportMode:R,rows:n,setRows:i,setLoadingSearch:h,loadingSearch:x,setSaveButtonDisabled:S,saveButtonDisabled:j},children:[(0,f.jsx)("div",{id:"entry-header-id",children:(0,f.jsx)(u.Z,{handleClick:function(e){M((function(t){return t.set("selected",""),t.set("classification",e.target.textContent),t})),i([]),Y(g(e.target.textContent,N))},classification:q,components:b,save:y,setSave:v,setDeletes:E,deletes:w,setCancel:z,cancel:A})}),(0,f.jsx)(c.Suspense,{fallback:(0,f.jsx)("h1",{children:"Loading..."}),children:L})]})})}function C(e,t,n){return(i=i||(0,r.Z)((0,o.Z)().mark((function e(t,n,i){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/reference/id-entry-generate-id",i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n,i){Object.entries(n).forEach((function(n){var o=(0,a.Z)(n,2),r=o[0],c=o[1];r===i?(0,u.I)(t.get("classification"),c):e({type:"UPDATE_FIELD",field:r,value:c})}))}},7247:function(e,t,n){var i=n(4836);t.Z=void 0;var o=i(n(5649)),r=n(184),a=(0,o.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=482.7f3883fd.chunk.js.map