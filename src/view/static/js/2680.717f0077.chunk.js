"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[2680],{1957:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(1413),a=n(9439),r=n(2791),d=n(4554),l=n(7482),o=n(6212),s=n(1128),u=n(184);function c(e){var t=e.onSelectionChange,n=e.initialPage,c=void 0===n?10:n,p=e.columns,h=e.rowHeight,m=void 0===h?35:h,f=e.getRowId,x=e.rows,w=e.isLoading,y=e.mutipleSelect,g=e.height,b=void 0===g?"500px":g,v=(0,s.Z)(),N=v.searchParams,Z=v.setSearchParams,S=(0,r.useState)([]),j=(0,a.Z)(S,2),C=j[0],k=j[1],_=(0,r.useState)(!1),A=(0,a.Z)(_,2),I=A[0],T=A[1],z=r.useState({pageSize:parseInt(N.get("pageSize"))||100,page:parseInt(N.get("page"))||1}),D=(0,a.Z)(z,2),M=D[0],E=D[1];if((0,r.useEffect)((function(){k(""===N.get("selected")?[]:[N.get("selected")])}),[N]),(0,r.useEffect)((function(){t(C,x)}),[I]),w){var F=p.map((function(e){return"id"===e.field&&(e=(0,i.Z)((0,i.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(d.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(o._$,{slots:{loadingOverlay:l.Z},loading:w,rows:[{id:"Loading..."}],columns:F})})}return(0,u.jsxs)(d.Z,{sx:{height:b,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){k([])},children:"reset"}),y?(0,u.jsx)(o._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:l.Z},loading:w,rowHeight:m,rows:x,columns:p,initialState:{pagination:{paginationModel:{page:0,pageSize:c}}},pageSizeOptions:[c,25,50,100],getRowId:f}):(0,u.jsx)(o._$,{slots:{loadingOverlay:l.Z},loading:w,rowHeight:m,rows:x,columns:p,initialState:{pagination:{paginationModel:{page:0,pageSize:c}}},checkboxSelection:!0,pageSizeOptions:[c,25,50,100],onRowDoubleClick:function(e){T((function(e){return!e})),k((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(C),i=e.filter((function(e){return!n.has(e)}));t(i,x),k(i)}else t(e,x),k(e)},disableRowSelectionOnClick:!0,rowSelectionModel:C,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:f,paginationModel:M,onPaginationModelChange:function(e){E(e),Z((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},5088:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(184);function a(e){var t=e.name,n=e.label;return(0,i.jsx)("div",{style:{flex:1,minWidth:"190px",position:"relative"},children:(0,i.jsxs)("fieldset",{style:{position:"relative",height:"40px",margin:"0",outline:"none",borderRadius:"5px",border:"1px solid #9ca3af"},children:[(0,i.jsx)("legend",{style:{fontSize:"11px",margin:0,position:"absolute",top:"-10px",background:"white",padding:"0 5px"},children:n}),(0,i.jsx)("p",{id:"".concat(t,"-text"),style:{position:"absolute",top:"-20%",fontSize:"15px",color:"#71717a"},children:"Generate ID, Click New"}),(0,i.jsx)("input",{type:"text",name:t,style:{opacity:0,position:"absolute"}})]})})}},2680:function(e,t,n){n.r(t),n.d(t,{EntrySupplier:function(){return A},default:function(){return T}});var i,a=n(4942),r=n(7762),d=n(9439),l=n(4165),o=n(5861),s=n(2791),u=n(4554),c=n(8096),p=n(7133),h=n(8970),m=n(4989),f=n(1419),x=n(8550),w=n(3380),y=n(5088),g=n(1957),b=n(1128),v=n(7432),N=n(1933),Z=n(6166),S=n(1830),j=n.n(S),C=n(3263),k=n(8749),_=n(184);function A(e,t,n,a,r){return(i=i||(0,o.Z)((0,l.Z)().mark((function e(t,n,i,a,r){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return e.next=3,t.post("/reference/entry-update?entry=".concat(r),i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,t.post("/reference/id-entry-supplier",i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I={firstname:"",lastname:"",middlename:"",company:"",tin_no:"",address:"",email:"",mobile:"",telephone:"",sub_account:"",VAT_Type:"vat",option:"individual"};function T(e){var t,n,i,S,T=e.hasSelected,M=(0,b.Z)(),E=M.searchParams,F=M.setSearchParams,R=(0,s.useReducer)(k.I6,I),L=(0,d.Z)(R,2),O=L[0],V=L[1],G=(0,s.useContext)(C.v),W=G.rows,B=G.setRows,P=G.loadingSearch,q=G.exportMode,H=(0,s.useContext)(w.V),K=H.myAxios,Q=H.user,U=(0,s.useState)(!0),$=(0,d.Z)(U,2),X=$[0],Y=$[1],J="entry_supplier_id",ee=(0,N.useQueryClient)(),te=(0,N.useQuery)({queryKey:J,queryFn:function(){return(t=t||(0,o.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.Ku)(K,Q,"Supplier",E.get("entrySearch"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){B(null===e||void 0===e?void 0:e.data.entry)}}),ne=te.isLoading,ie=(0,N.useMutation)({mutationKey:J,mutationFn:function(e){return(n=n||(0,o.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(K,Q,t,""!==E.get("selected"),"Supplier");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),e.data.success&&(ee.invalidateQueries(J),j().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),ae=ie.mutate,re=ie.isLoading,de=(0,N.useMutation)({mutationKey:J,mutationFn:function(e){return(i=i||(0,o.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.post("/reference/entry-delete?entry=Supplier",t,{headers:{Authorization:"Bearer ".concat(null===Q||void 0===Q?void 0:Q.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),e.data.success&&(ee.invalidateQueries(J),j().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),le=de.mutate,oe=de.isLoading;(0,s.useEffect)((function(){if(""===E.get("selected"))return T(!1),void Y(!0);var e=E.get("selected"),t=new Set([e]),n=W.filter((function(e){return t.has(e[J].toString())}))[0];n&&(T(!0),Y(!1),(0,Z.setNewStateValue)(V,E,n,J))}),[W,E,T]);var se=function(e){var t=e.target,n=t.name,i=t.value;V({type:"UPDATE_FIELD",field:n,value:i})};function ue(){(0,v.I)(E.get("classification"),""),Object.entries(I).forEach((function(e){var t=(0,d.Z)(e,2),n=t[0],i=t[1];V({type:"UPDATE_FIELD",field:n,value:i})}))}return(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("button",{id:"delete-entry-by-id",style:{display:"none",position:"absolute"},onClick:function(){return le({id:E.get("selected")})}}),(0,_.jsx)("button",{id:"enable-fields",style:{display:"none",position:"absolute"},onClick:function(){return Y(!1)}}),(0,_.jsx)("button",{id:"disable-fields",style:{display:"none",position:"absolute"},onClick:function(){return Y(!0)}}),(0,_.jsx)("form",{onSubmit:function(e){return(S=S||(0,o.Z)((0,l.Z)().mark((function e(t){var n,i,a,o,s,u,c;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=new FormData(t.currentTarget),i={},a=(0,r.Z)(n.entries());try{for(a.s();!(o=a.n()).done;)s=(0,d.Z)(o.value,2),u=s[0],c=s[1],i[u]=c}catch(l){a.e(l)}finally{a.f()}ae(i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},style:{width:"100%"},id:"Form-Supplier",children:(0,_.jsxs)(u.Z,{sx:function(e){var t;return t={display:"flex",columnGap:"15px",flexDirection:"row",width:"100%"},(0,a.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,a.Z)(t,"marginBottom","10px"),t},children:[(0,_.jsxs)(u.Z,{sx:function(e){return{display:"flex",rowGap:"10px",flexDirection:"column"}},children:[(0,_.jsx)(y.Z,{label:"Supplier ID Entry",name:"entry_supplier_id"}),(0,_.jsxs)(c.Z,{sx:function(e){return(0,a.Z)({border:"1px solid #c2c2c2",padding:"5px",borderRadius:"5px",width:"240px",maxHeight:"80px"},e.breakpoints.down("md"),{width:"100%"})},required:!0,disabled:X,children:[(0,_.jsx)(p.Z,{id:"option",children:"Option"}),(0,_.jsxs)(h.Z,{defaultValue:"individual",row:!0,"aria-labelledby":"option",name:"option",value:O.option,onChange:se,children:[(0,_.jsx)(m.Z,{value:"individual",control:(0,_.jsx)(f.Z,{size:"small"}),label:"Individual"}),(0,_.jsx)(m.Z,{value:"company",control:(0,_.jsx)(f.Z,{size:"small"}),label:"Company"})]})]}),(0,_.jsxs)(c.Z,{sx:function(e){return(0,a.Z)({border:"1px solid #c2c2c2",padding:"5px",borderRadius:"5px",width:"240px",maxHeight:"80px"},e.breakpoints.down("md"),{width:"100%"})},disabled:X,children:[(0,_.jsx)(p.Z,{id:"vat-type",children:"VAT Type"}),(0,_.jsxs)(h.Z,{row:!0,"aria-labelledby":"vat-type",name:"VAT_Type",value:O.VAT_Type,onChange:se,children:[(0,_.jsx)(m.Z,{value:"vat",control:(0,_.jsx)(f.Z,{size:"small"}),label:"Vat"}),(0,_.jsx)(m.Z,{value:"non-vat",control:(0,_.jsx)(f.Z,{size:"small"}),label:"Non Vat"})]})]})]}),(0,_.jsxs)("div",{style:{width:"100%"},children:[(0,_.jsx)(u.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:O.option.includes("individual")?(0,_.jsx)(z,{state:O,handleInputChange:se,disabled:X}):(0,_.jsx)(D,{state:O,handleInputChange:se,disabled:X})}),(0,_.jsxs)(u.Z,{sx:{display:"flex",gap:"15px",marginTop:"10px"},children:[(0,_.jsx)(x.Z,{type:"email",name:"email",label:"Email",size:"small",fullWidth:!0,value:O.email,onChange:se,disabled:X}),(0,_.jsx)(x.Z,{type:"number",name:"mobile",label:"Mobile Number",size:"small",fullWidth:!0,value:O.mobile,onChange:se,disabled:X}),(0,_.jsx)(x.Z,{type:"number",name:"telephone",label:"Telephone Number",size:"small",fullWidth:!0,value:O.telephone,onChange:se,disabled:X})]}),(0,_.jsx)(x.Z,{type:"address",name:"address",label:"Address",size:"small",fullWidth:!0,value:O.address,onChange:se,disabled:X,style:{marginTop:"10px"}})]}),(0,_.jsx)("button",{type:"submit",id:"Supplier",style:{display:"none"}}),(0,_.jsx)("button",{type:"button",id:"Supplier-reset",style:{display:"none"},onClick:ue})]})}),(0,_.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,_.jsx)(g.Z,{mutipleSelect:q,isLoading:ne||P||re||oe,dataKey:"entry",queryKey:[J],columns:k.GY,onSelectionChange:function(e,t){if(e.length<=0)return Y(!0),ue(),T(!1),void F((function(e){return e.set("selected",""),e}));Y(!1),T(!0);var n=new Set(e),i=t.filter((function(e){return n.has(e[J].toString())}));F((function(t){return t.set("selected",e[0]),t})),(0,Z.setNewStateValue)(V,E,i[0],J)},getRowId:function(e){return e[J]},rows:W,setRows:B})})]})}function z(e){var t=e.state,n=e.handleInputChange,i=e.disabled;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.Z,{type:"text",name:"tin_no",label:"TIN NO",size:"small",fullWidth:!0,value:t.tin_no,onChange:n,disabled:i}),(0,_.jsx)(x.Z,{type:"text",name:"firstname",label:"First Name",size:"small",fullWidth:!0,value:t.firstname,onChange:n,disabled:i,required:!0}),(0,_.jsx)(x.Z,{type:"text",name:"middlename",label:"Middle Name",size:"small",fullWidth:!0,value:t.middlename,onChange:n,disabled:i,required:!0}),(0,_.jsx)(x.Z,{type:"text",name:"lastname",label:"Last Name",size:"small",fullWidth:!0,value:t.lastname,onChange:n,disabled:i,required:!0})]})}function D(e){var t=e.state,n=e.handleInputChange,i=e.disabled;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.Z,{type:"text",name:"tin_no",label:"TIN NO",size:"small",fullWidth:!0,value:t.tin_no,onChange:n,disabled:i}),(0,_.jsx)(x.Z,{type:"Company",name:"company",label:"company",size:"small",fullWidth:!0,value:t.company,onChange:n,disabled:i,required:!0})]})}},8749:function(e,t,n){n.d(t,{GY:function(){return p},I6:function(){return m},Ku:function(){return f},fJ:function(){return c},kb:function(){return s},m5:function(){return h},oy:function(){return o},y:function(){return u}});var i,a=n(4165),r=n(5861),d=n(4942),l=n(1413),o=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],s=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],c=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],p=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],h=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"createdAt",headerName:"Created At",width:200}],m=function(e,t){return"UPDATE_FIELD"===t.type?(0,l.Z)((0,l.Z)({},e),{},(0,d.Z)({},t.field,t.value)):e};function f(e,t,n,d){return(i=i||(0,r.Z)((0,a.Z)().mark((function e(t,n,i,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/reference/search-entry?entrySearch=".concat(r,"&entry=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=2680.717f0077.chunk.js.map