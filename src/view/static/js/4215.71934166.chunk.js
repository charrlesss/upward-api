"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4215],{1957:function(e,n,t){t.d(n,{Z:function(){return d}});var i=t(1413),o=t(9439),r=t(2791),a=t(4554),l=t(7482),s=t(6212),c=t(1128),u=t(184);function d(e){var n=e.onSelectionChange,t=e.initialPage,d=void 0===t?10:t,f=e.columns,h=e.rowHeight,x=void 0===h?35:h,p=e.getRowId,g=e.rows,m=e.isLoading,v=e.mutipleSelect,b=e.height,Z=void 0===b?"500px":b,S=(0,c.Z)(),w=S.searchParams,C=S.setSearchParams,j=(0,r.useState)([]),y=(0,o.Z)(j,2),k=y[0],D=y[1],I=(0,r.useState)(!1),B=(0,o.Z)(I,2),L=B[0],A=B[1],z=r.useState({pageSize:parseInt(w.get("pageSize"))||100,page:parseInt(w.get("page"))||1}),E=(0,o.Z)(z,2),T=E[0],M=E[1];if((0,r.useEffect)((function(){D(""===w.get("selected")?[]:[w.get("selected")])}),[w]),(0,r.useEffect)((function(){n(k,g)}),[L]),m){var N=f.map((function(e){return"id"===e.field&&(e=(0,i.Z)((0,i.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(a.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(s._$,{slots:{loadingOverlay:l.Z},loading:m,rows:[{id:"Loading..."}],columns:N})})}return(0,u.jsxs)(a.Z,{sx:{height:Z,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){D([])},children:"reset"}),v?(0,u.jsx)(s._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:l.Z},loading:m,rowHeight:x,rows:g,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},pageSizeOptions:[d,25,50,100],getRowId:p}):(0,u.jsx)(s._$,{slots:{loadingOverlay:l.Z},loading:m,rowHeight:x,rows:g,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},checkboxSelection:!0,pageSizeOptions:[d,25,50,100],onRowDoubleClick:function(e){A((function(e){return!e})),D((function(n){return n.length>0&&n[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var t=new Set(k),i=e.filter((function(e){return!t.has(e)}));n(i,g),D(i)}else n(e,g),D(e)},disableRowSelectionOnClick:!0,rowSelectionModel:k,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:p,paginationModel:T,onPaginationModelChange:function(e){M(e),C((function(n){return n.set("page",e.page.toString()),n.set("pageSize",e.pageSize.toString()),n}))}})]})}},341:function(e,n,t){t.d(n,{L:function(){return u}});var i=t(9439),o=t(2791),r=t(6151),a=t(5117),l=t(3786),s=t(7),c=t(184);function u(e){var n=e.setExportMode,t=o.useState(null),u=(0,i.Z)(t,2),d=u[0],f=u[1],h=Boolean(d),x=function(){f(null)};return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(r.Z,{id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){f(e.currentTarget),n(!0)},variant:"contained",sx:{backgroundColor:s.Z[500],"&:hover":{backgroundColor:s.Z[600]}},children:"Export"}),(0,c.jsxs)(a.Z,{id:"basic-menu",anchorEl:d,open:h,onClose:x,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,c.jsx)(l.Z,{onClick:x,children:"Export as Excel All Data "}),(0,c.jsxs)(l.Z,{onClick:x,children:["Export as Excel Only Data in Table"," "]}),(0,c.jsx)(l.Z,{onClick:x,children:"Print Data in Table"})]})]})}},4215:function(e,n,t){t.r(n),t.d(n,{default:function(){return F},reducer:function(){return N},setNewStateValue:function(){return G},sublineColumn:function(){return P}});var i=t(4165),o=t(5861),r=t(9439),a=t(4942),l=t(1413),s=t(2791),c=t(4554),u=t(890),d=t(8550),f=t(6151),h=t(3239),x=t(7482),p=t(8096),g=t(829),m=t(8406),v=t(3786),b=t(2419),Z=t(7247),S=t(1128),w=t(1957),C=t(4378),j=t(3380),y=t(1933),k=t(1830),D=t.n(k),I=t(9018),B=t(763),L=t(7),A=t(9823),z=t(3329),E=t(341),T=t(184),M={Line:"",SublineName:""},N=function(e,n){return"UPDATE_FIELD"===n.type?(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n.field,n.value)):e},P=[{field:"ID",headerName:"ID",width:100},{field:"Line",headerName:"Line",flex:1},{field:"SublineName",headerName:"SubLine Name",flex:1},{field:"createdAt",headerName:"Created At",flex:1}],R="subline-account";function F(){var e,n,k,F,O,H=(0,S.Z)(),Y=H.searchParams,_=H.setSearchParams,K=(0,s.useReducer)(N,M),V=(0,r.Z)(K,2),q=V[0],Q=V[1],U=(0,s.useContext)(j.V),$=U.myAxios,W=U.user,X=(0,s.useState)(!1),J=(0,r.Z)(X,2),ee=J[0],ne=J[1],te=(0,s.useState)(!1),ie=(0,r.Z)(te,2),oe=ie[0],re=ie[1],ae=(0,s.useState)(""!==Y.get("selected")),le=(0,r.Z)(ae,2),se=le[0],ce=le[1],ue=(0,s.useState)(""!==Y.get("selected")),de=(0,r.Z)(ue,2),fe=de[0],he=de[1],xe=(0,s.useState)(""!==Y.get("selected")),pe=(0,r.Z)(xe,2),ge=pe[0],me=pe[1],ve=(0,s.useState)([]),be=(0,r.Z)(ve,2),Ze=be[0],Se=be[1],we=(0,s.useRef)(null),Ce=(0,s.useState)(""!==Y.get("selected")),je=(0,r.Z)(Ce,2),ye=je[0],ke=je[1],De=(0,y.useQueryClient)(),Ie=(0,y.useQuery)({queryKey:R,queryFn:function(){return(e=e||(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/reference/get-subline?sublineSearch=".concat(Y.get("sublineSearch")),{headers:{Authorization:"Bearer ".concat(null===W||void 0===W?void 0:W.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){Se(null===e||void 0===e?void 0:e.data.subline.subline)}}),Be=Ie.data,Le=Ie.isLoading,Ae=(0,y.useMutation)({mutationKey:R,mutationFn:function(e){return(n=n||(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mode||"delete"!==n.mode){e.next=4;break}return e.next=3,$.post("/reference/delete-subline",{ID:Y.get("selected")},{headers:{Authorization:"Bearer ".concat(null===W||void 0===W?void 0:W.accessToken)}});case 3:case 8:case 12:return e.abrupt("return",e.sent);case 4:if(!ye){e.next=9;break}return delete n.mode,e.next=8,$.post("/reference/update-subline",(0,l.Z)((0,l.Z)({},n),{},{ID:Y.get("selected")}),{headers:{Authorization:"Bearer ".concat(null===W||void 0===W?void 0:W.accessToken)}});case 9:return delete n.mode,e.next=12,$.post("/reference/add-subline",n,{headers:{Authorization:"Bearer ".concat(null===W||void 0===W?void 0:W.accessToken)}});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return De.invalidateQueries(R),D().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});D().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),ze=Ae.mutate,Ee=Ae.isLoading,Te=Ae.variables;(0,s.useEffect)((function(){if(""!==Y.get("selected")){var e=Y.get("selected"),n=new Set([e]),t=null===Ze||void 0===Ze?void 0:Ze.filter((function(e){return n.has(e.ID.toString())}))[0];t&&G(Q,t)}}),[Ze,Y]);var Me=function(e){var n=e.target,t=n.name,i=n.value;Q({type:"UPDATE_FIELD",field:t,value:i})};var Ne=(0,B.throttle)((function(e){re(!0);var n=e.target.value;_((function(e){return e.set("sublineSearch",n),e})),$.get("/reference/search-subline?sublineSearch=".concat(n),{headers:{Authorization:"Bearer ".concat(null===W||void 0===W?void 0:W.accessToken)}}).then((function(e){e.data.success&&(re(!1),Se(e.data.subline))}))}),300);return(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)(c.Z,{children:(0,T.jsx)(u.Z,{variant:"h5",sx:{marginBottom:"10px"},children:"Subline Details"})}),(0,T.jsxs)(c.Z,{sx:function(e){return(0,a.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,T.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"},children:(0,T.jsx)(d.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:Y.get("sublineSearch"),onChange:Ne})}),ee?(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,T.jsx)(f.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){t.e(1316).then(t.bind(t,1316)).then((function(e){e.exportFunction("/reference/export-subline?sublineSearch=".concat(Y.get("sublineSearch"),"&isAll=true"),"Subline-All.xlsx",$,W)}))},children:"Export All"}),(0,T.jsx)(f.Z,{variant:"outlined",color:"success",onClick:function(){t.e(1316).then(t.bind(t,1316)).then((function(e){e.exportFunction("/reference/export-subline?sublineSearch=".concat(Y.get("sublineSearch"),"&isAll=false"),"Subline-Search.xlsx",$,W)}))},size:"small",children:"Export Table"}),(0,T.jsx)(f.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return ne(!1)},children:"Cancel"})]}):(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,T.jsx)("div",{children:(0,T.jsx)(E.L,{setExportMode:ne})}),!se&&(0,T.jsx)(f.Z,{variant:"contained",startIcon:(0,T.jsx)(b.Z,{}),id:"entry-header-save-button",onClick:function(){var e;he(!0),ce(!0),ke(!1),_((function(e){return e.set("sublineSearch",""),e.set("selected",""),e})),null===(e=document.getElementById("reset-data-grid-selection"))||void 0===e||e.click()},children:"New"}),(0,T.jsxs)(c.Z,{sx:{position:"relative"},children:[(0,T.jsx)(f.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){D().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&(0,I.D)(300).then((function(){var e;null===(e=we.current)||void 0===e||e.click()}))}))},disabled:Ee&&void 0===Te.mode||!se,startIcon:(0,T.jsx)(z.Z,{}),children:"Save"}),Ee&&void 0===Te.mode&&(0,T.jsx)(h.Z,{size:24,sx:{color:L.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),se&&(0,T.jsx)(f.Z,{variant:"contained",startIcon:(0,T.jsx)(A.Z,{}),color:"error",onClick:function(){D().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){var n;e.isConfirmed&&(ce(!1),he(!1),me(!1),G(Q,M),null===(n=document.getElementById("reset-data-grid-selection"))||void 0===n||n.click(),ke(!1),_((function(e){return e.set("sublineSearch",""),e.set("selected",""),e})))}))},children:"Cancel"}),(0,T.jsx)(f.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:C.Z[500],"&:hover":{backgroundColor:C.Z[600]}},disabled:!ge,startIcon:(0,T.jsx)(Z.Z,{}),onClick:function(){D().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&ze({ID:Y.get("selected"),mode:"delete"})}))},children:"Delete"})]})})]}),!ee&&(0,T.jsxs)("form",{onSubmit:function(e){return(k=k||(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),ze((0,l.Z)((0,l.Z)({},q),{},{mode:""}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,T.jsx)(c.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:Le?(0,T.jsx)(x.Z,{}):(0,T.jsxs)(s.Fragment,{children:[(0,T.jsxs)(p.Z,{disabled:!fe,size:"small",sx:function(e){return(0,a.Z)({width:300},e.breakpoints.down("md"),{width:"100%"})},children:[(0,T.jsx)(g.Z,{id:"Line",children:"Line"}),(0,T.jsx)(m.Z,{labelId:"Line",value:q.Line,label:"Line",name:"Line",onChange:Me,children:null===(F=Be.data)||void 0===F||null===(O=F.subline)||void 0===O?void 0:O.line.map((function(e,n){return(0,T.jsx)(v.Z,{value:e.Line,children:e.Line},n)}))})]}),(0,T.jsx)(d.Z,{type:"text",variant:"outlined",size:"small",label:"SublineName",name:"SublineName",value:q.SublineName,onChange:Me,disabled:!fe,fullWidth:!0})]})}),(0,T.jsx)("button",{ref:we,style:{display:"none"},type:"submit"})]}),(0,T.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,T.jsx)(w.Z,{mutipleSelect:ee,isLoading:Ee||Le||oe,dataKey:"entry",queryKey:[R],columns:P,onSelectionChange:function(e,n){if(e.length<=0)return G(Q,M),_((function(e){return e.set("selected",""),e})),ke(!1),he(!1),ce(!1),void me(!1);ce(!0),me(!0),he(!0),ke(!0);var t=new Set(e),i=n.filter((function(e){return t.has(e.ID.toString())}));_((function(n){return n.set("selected",e[0]),n})),G(Q,i[0])},getRowId:function(e){return e.ID.toString()},rows:Ze,setRows:Se})})]})}function G(e,n){Object.entries(n).forEach((function(n){var t=(0,r.Z)(n,2),i=t[0],o=t[1];e({type:"UPDATE_FIELD",field:i,value:o})}))}},7247:function(e,n,t){var i=t(4836);n.Z=void 0;var o=i(t(5649)),r=t(184),a=(0,o.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=a},4378:function(e,n){n.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=4215.71934166.chunk.js.map