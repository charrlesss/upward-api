"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[765],{1957:function(e,n,t){t.d(n,{Z:function(){return d}});var o=t(1413),r=t(9439),i=t(2791),a=t(4554),c=t(7482),l=t(6212),s=t(1128),u=t(184);function d(e){var n=e.onSelectionChange,t=e.initialPage,d=void 0===t?10:t,f=e.columns,p=e.rowHeight,h=void 0===p?35:p,x=e.getRowId,m=e.rows,g=e.isLoading,v=e.mutipleSelect,Z=e.height,b=void 0===Z?"500px":Z,y=(0,s.Z)(),C=y.searchParams,w=y.setSearchParams,j=(0,i.useState)([]),S=(0,r.Z)(j,2),k=S[0],A=S[1],z=(0,i.useState)(!1),G=(0,r.Z)(z,2),M=G[0],D=G[1],P=i.useState({pageSize:parseInt(C.get("pageSize"))||100,page:parseInt(C.get("page"))||1}),B=(0,r.Z)(P,2),E=B[0],R=B[1];if((0,i.useEffect)((function(){A(""===C.get("selected")?[]:[C.get("selected")])}),[C]),(0,i.useEffect)((function(){n(k,m)}),[M]),g){var T=f.map((function(e){return"id"===e.field&&(e=(0,o.Z)((0,o.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(a.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(l._$,{slots:{loadingOverlay:c.Z},loading:g,rows:[{id:"Loading..."}],columns:T})})}return(0,u.jsxs)(a.Z,{sx:{height:b,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){A([])},children:"reset"}),v?(0,u.jsx)(l._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:c.Z},loading:g,rowHeight:h,rows:m,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},pageSizeOptions:[d,25,50,100],getRowId:x}):(0,u.jsx)(l._$,{slots:{loadingOverlay:c.Z},loading:g,rowHeight:h,rows:m,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},checkboxSelection:!0,pageSizeOptions:[d,25,50,100],onRowDoubleClick:function(e){D((function(e){return!e})),A((function(n){return n.length>0&&n[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var t=new Set(k),o=e.filter((function(e){return!t.has(e)}));n(o,m),A(o)}else n(e,m),A(e)},disableRowSelectionOnClick:!0,rowSelectionModel:k,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:x,paginationModel:E,onPaginationModelChange:function(e){R(e),w((function(n){return n.set("page",e.page.toString()),n.set("pageSize",e.pageSize.toString()),n}))}})]})}},341:function(e,n,t){t.d(n,{L:function(){return u}});var o=t(9439),r=t(2791),i=t(6151),a=t(5117),c=t(3786),l=t(7),s=t(184);function u(e){var n=e.setExportMode,t=r.useState(null),u=(0,o.Z)(t,2),d=u[0],f=u[1],p=Boolean(d),h=function(){f(null)};return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(i.Z,{id:"basic-button","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:function(e){f(e.currentTarget),n(!0)},variant:"contained",sx:{backgroundColor:l.Z[500],"&:hover":{backgroundColor:l.Z[600]}},children:"Export"}),(0,s.jsxs)(a.Z,{id:"basic-menu",anchorEl:d,open:p,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,s.jsx)(c.Z,{onClick:h,children:"Export as Excel All Data "}),(0,s.jsxs)(c.Z,{onClick:h,children:["Export as Excel Only Data in Table"," "]}),(0,s.jsx)(c.Z,{onClick:h,children:"Print Data in Table"})]})]})}},765:function(e,n,t){t.r(n),t.d(n,{default:function(){return I},poliyAccountColumn:function(){return R},reducer:function(){return E},setNewStateValue:function(){return L}});var o=t(4165),r=t(5861),i=t(9439),a=t(4942),c=t(1413),l=t(2791),s=t(4554),u=t(890),d=t(8550),f=t(6151),p=t(3239),h=t(2419),x=t(7247),m=t(1128),g=t(9012),v=t(4989),Z=t(4454),b=t(1957),y=t(4378),C=t(3380),w=t(1933),j=t(1830),S=t.n(j),k=t(9018),A=t(763),z=t(7),G=t(9823),M=t(3329),D=t(341),P=t(184),B={AccountCode:"",Account:"",Description:"",COM:!1,TPL:!1,MAR:!1,FIRE:!1,G02:!1,G13:!1,G16:!1,MSPR:!1,PA:!1,CGL:!1,Inactive:!1},E=function(e,n){return"UPDATE_FIELD"===n.type?(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},n.field,n.value)):e},R=[{field:"Account",headerName:"Account",width:130},{field:"AccountCode",headerName:"Account Code",width:200},{field:"Description",headerName:"Description",flex:1},{field:"createdAt",headerName:"Created At",width:200}],T="policy-account";function I(){var e,n,j,I=(0,m.Z)(),F=I.searchParams,O=I.setSearchParams,N=(0,l.useReducer)(E,B),H=(0,i.Z)(N,2),_=H[0],q=H[1],Y=(0,l.useContext)(C.V),W=Y.myAxios,K=Y.user,U=(0,l.useState)(!1),V=(0,i.Z)(U,2),Q=V[0],$=V[1],X=(0,l.useState)(!1),J=(0,i.Z)(X,2),ee=J[0],ne=J[1],te=(0,l.useState)(""!==F.get("selected")),oe=(0,i.Z)(te,2),re=oe[0],ie=oe[1],ae=(0,l.useState)(""!==F.get("selected")),ce=(0,i.Z)(ae,2),le=ce[0],se=ce[1],ue=(0,l.useState)(""!==F.get("selected")),de=(0,i.Z)(ue,2),fe=de[0],pe=de[1],he=(0,l.useState)([]),xe=(0,i.Z)(he,2),me=xe[0],ge=xe[1],ve=(0,l.useRef)(null),Ze=(0,l.useState)(""!==F.get("selected")),be=(0,i.Z)(Ze,2),ye=be[0],Ce=be[1],we=(0,w.useQueryClient)(),je=(0,w.useQuery)({queryKey:T,queryFn:function(){return(e=e||(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/reference/get-policy-account?policySearch=".concat(F.get("policySearch")),{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){ge(null===e||void 0===e?void 0:e.data.policy)}}),Se=je.isLoading,ke=(0,w.useMutation)({mutationKey:T,mutationFn:function(e){return(n=n||(0,r.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mode||"delete"!==n.mode){e.next=4;break}return e.next=3,W.post("/reference/delete-policy-account",n,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 3:case 8:case 12:return e.abrupt("return",e.sent);case 4:if(!ye){e.next=9;break}return delete n.mode,e.next=8,W.post("/reference/update-policy-account",n,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 9:return delete n.mode,e.next=12,W.post("/reference/add-policy-account",n,{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return we.invalidateQueries(T),S().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});S().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),Ae=ke.mutate,ze=ke.isLoading,Ge=ke.variables;(0,l.useEffect)((function(){if(""!==F.get("selected")){var e=F.get("selected"),n=new Set([e]),t=null===me||void 0===me?void 0:me.filter((function(e){return n.has(e.Account.toString())}))[0];t&&L(q,t)}}),[me,F]);var Me=function(e){var n=e.target,t=n.name,o=n.value;q({type:"UPDATE_FIELD",field:t,value:o})},De=function(e){var n=e.target,t=n.name,o=n.value;q({type:"UPDATE_FIELD",field:t,value:!JSON.parse(o)})};var Pe=(0,A.throttle)((function(e){ne(!0);var n=e.target.value;O((function(e){return e.set("policySearch",n),e})),W.get("/reference/search-policy-account?policySearch=".concat(n),{headers:{Authorization:"Bearer ".concat(null===K||void 0===K?void 0:K.accessToken)}}).then((function(e){console.log(e),e.data.success&&(ne(!1),ge(e.data.policy))}))}),300);return(0,P.jsxs)(l.Fragment,{children:[(0,P.jsx)(s.Z,{children:(0,P.jsx)(u.Z,{variant:"h5",sx:{marginBottom:"10px"},children:"Transaction Code Details"})}),(0,P.jsxs)(s.Z,{sx:function(e){return(0,a.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,P.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"},children:(0,P.jsx)(d.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:F.get("policySearch"),onChange:Pe})}),Q?(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,P.jsx)(f.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){t.e(1316).then(t.bind(t,1316)).then((function(e){e.exportFunction("/reference/export-policy-account?policySearch=".concat(F.get("policySearch"),"&isAll=true"),"Policy-All.xlsx",W,K)}))},children:"Export All"}),(0,P.jsx)(f.Z,{variant:"outlined",color:"success",onClick:function(){t.e(1316).then(t.bind(t,1316)).then((function(e){e.exportFunction("/reference/export-policy-account?policySearch=".concat(F.get("policySearch"),"&isAll=false"),"Policy-Search.xlsx",W,K)}))},size:"small",children:"Export Table"}),(0,P.jsx)(f.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return $(!1)},children:"Cancel"})]}):(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,P.jsx)("div",{children:(0,P.jsx)(D.L,{setExportMode:$})}),!re&&(0,P.jsx)(f.Z,{variant:"contained",startIcon:(0,P.jsx)(h.Z,{}),id:"entry-header-save-button",onClick:function(){var e;se(!0),ie(!0),Ce(!1),O((function(e){return e.set("policySearch",""),e.set("selected",""),e})),null===(e=document.getElementById("reset-data-grid-selection"))||void 0===e||e.click()},children:"New"}),(0,P.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,P.jsx)(f.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){S().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&(0,k.D)(300).then((function(){var e;null===(e=ve.current)||void 0===e||e.click()}))}))},disabled:ze&&void 0===Ge.mode||!re,startIcon:(0,P.jsx)(M.Z,{}),children:"Save"}),ze&&void 0===Ge.mode&&(0,P.jsx)(p.Z,{size:24,sx:{color:z.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),re&&(0,P.jsx)(f.Z,{variant:"contained",startIcon:(0,P.jsx)(G.Z,{}),color:"error",onClick:function(){S().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){var n;e.isConfirmed&&(ie(!1),se(!1),pe(!1),L(q,B),null===(n=document.getElementById("reset-data-grid-selection"))||void 0===n||n.click(),Ce(!1),O((function(e){return e.set("policySearch",""),e.set("selected",""),e})))}))},children:"Cancel"}),(0,P.jsx)(f.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:y.Z[500],"&:hover":{backgroundColor:y.Z[600]}},disabled:!fe,startIcon:(0,P.jsx)(x.Z,{}),onClick:function(){S().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&Ae({Account:F.get("selected"),mode:"delete"})}))},children:"Delete"})]})})]}),!Q&&(0,P.jsxs)("form",{onSubmit:function(e){return(j=j||(0,r.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),Ae((0,c.Z)((0,c.Z)({},_),{},{mode:""}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,P.jsxs)(s.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:[(0,P.jsx)(d.Z,{sx:{minWidth:"200px"},size:"small",label:"Account",name:"Account",required:!0,value:_.Account,onChange:Me,disabled:!le||ye}),(0,P.jsx)(d.Z,{sx:{minWidth:"200px"},size:"small",label:"Account Code",name:"AccountCode",required:!0,value:_.AccountCode,onChange:Me,disabled:!le}),(0,P.jsx)(d.Z,{fullWidth:!0,size:"small",label:"Description",name:"Description",required:!0,value:_.Description,onChange:Me,disabled:!le})]}),(0,P.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1"},children:[(0,P.jsx)("legend",{style:{color:"#6b7280"},children:"Policy Type"}),(0,P.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"COM",checked:_.COM,value:_.COM,onChange:De}),label:"Comprehensive"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"MAR",value:_.MAR,checked:_.MAR,onChange:De}),label:"Marine"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"G02",value:_.G02,checked:_.G02,onChange:De}),label:"Bond G(02)"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"G13",value:_.G13,checked:_.G13,onChange:De}),label:"Bond G(13)"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"G16",value:_.G16,checked:_.G16,onChange:De}),label:"Bond G(16)"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"PA",value:_.PA,checked:_.PA,onChange:De}),label:"PA"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"TPL",value:_.TPL,checked:_.TPL,onChange:De}),label:"TPL"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"FIRE",value:_.FIRE,checked:_.FIRE,onChange:De}),label:"Fire"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"MSPR",value:_.MSPR,checked:_.MSPR,onChange:De}),label:"MSPR"}),(0,P.jsx)(v.Z,{disabled:!le,control:(0,P.jsx)(Z.Z,{size:"small",name:"CGL",value:_.CGL,checked:_.CGL,onChange:De}),label:"CGL"})]})]}),(0,P.jsx)("button",{ref:ve,style:{display:"none"},type:"submit"})]}),(0,P.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,P.jsx)(b.Z,{mutipleSelect:Q,isLoading:ze||Se||ee,dataKey:"entry",queryKey:[T],columns:R,onSelectionChange:function(e,n){if(e.length<=0)return L(q,B),O((function(e){return e.set("selected",""),e})),Ce(!1),se(!1),ie(!1),void pe(!1);ie(!0),pe(!0),se(!0),Ce(!0);var t=new Set(e),o=n.filter((function(e){return t.has(e.Account.toString())}));O((function(n){return n.set("selected",e[0]),n})),L(q,o[0])},getRowId:function(e){return e.Account},rows:me,setRows:ge})})]})}function L(e,n){Object.entries(n).forEach((function(n){var t=(0,i.Z)(n,2),o=t[0],r=t[1];e({type:"UPDATE_FIELD",field:o,value:r})}))}},7247:function(e,n,t){var o=t(4836);n.Z=void 0;var r=o(t(5649)),i=t(184),a=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=a},9012:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(3366),r=t(7462),i=t(2791),a=t(3733),c=t(4419),l=t(6934),s=t(1402),u=t(5878),d=t(1217);function f(e){return(0,d.Z)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var p=t(2930),h=t(6147),x=t(184),m=["className","row"],g=(0,l.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.row&&n.row]}})((function(e){var n=e.ownerState;return(0,r.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})})),v=i.forwardRef((function(e,n){var t=(0,s.Z)({props:e,name:"MuiFormGroup"}),i=t.className,l=t.row,u=void 0!==l&&l,d=(0,o.Z)(t,m),v=(0,p.Z)(),Z=(0,h.Z)({props:t,muiFormControl:v,states:["error"]}),b=(0,r.Z)({},t,{row:u,error:Z.error}),y=function(e){var n=e.classes,t={root:["root",e.row&&"row",e.error&&"error"]};return(0,c.Z)(t,f,n)}(b);return(0,x.jsx)(g,(0,r.Z)({className:(0,a.Z)(y.root,i),ownerState:b,ref:n},d))}))},4378:function(e,n){n.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=765.e66b6016.chunk.js.map