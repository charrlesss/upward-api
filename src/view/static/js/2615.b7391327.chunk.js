"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[2615],{1957:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(1413),i=n(9439),r=n(2791),a=n(4554),c=n(7482),s=n(6212),l=n(1128),u=n(184);function d(e){var t=e.onSelectionChange,n=e.initialPage,d=void 0===n?10:n,f=e.columns,h=e.rowHeight,p=void 0===h?35:h,x=e.getRowId,m=e.rows,g=e.isLoading,v=e.mutipleSelect,b=e.height,Z=void 0===b?"500px":b,S=(0,l.Z)(),y=S.searchParams,w=S.setSearchParams,C=(0,r.useState)([]),j=(0,i.Z)(C,2),k=j[0],A=j[1],D=(0,r.useState)(!1),B=(0,i.Z)(D,2),E=B[0],z=B[1],I=r.useState({pageSize:parseInt(y.get("pageSize"))||100,page:parseInt(y.get("page"))||1}),T=(0,i.Z)(I,2),M=T[0],P=T[1];if((0,r.useEffect)((function(){A(""===y.get("selected")?[]:[y.get("selected")])}),[y]),(0,r.useEffect)((function(){t(k,m)}),[E]),g){var L=f.map((function(e){return"id"===e.field&&(e=(0,o.Z)((0,o.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(a.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(s._$,{slots:{loadingOverlay:c.Z},loading:g,rows:[{id:"Loading..."}],columns:L})})}return(0,u.jsxs)(a.Z,{sx:{height:Z,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){A([])},children:"reset"}),v?(0,u.jsx)(s._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:c.Z},loading:g,rowHeight:p,rows:m,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},pageSizeOptions:[d,25,50,100],getRowId:x}):(0,u.jsx)(s._$,{slots:{loadingOverlay:c.Z},loading:g,rowHeight:p,rows:m,columns:f,initialState:{pagination:{paginationModel:{page:0,pageSize:d}}},checkboxSelection:!0,pageSizeOptions:[d,25,50,100],onRowDoubleClick:function(e){z((function(e){return!e})),A((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(k),o=e.filter((function(e){return!n.has(e)}));t(o,m),A(o)}else t(e,m),A(e)},disableRowSelectionOnClick:!0,rowSelectionModel:k,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:x,paginationModel:M,onPaginationModelChange:function(e){P(e),w((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},341:function(e,t,n){n.d(t,{L:function(){return u}});var o=n(9439),i=n(2791),r=n(6151),a=n(5117),c=n(3786),s=n(7),l=n(184);function u(e){var t=e.setExportMode,n=i.useState(null),u=(0,o.Z)(n,2),d=u[0],f=u[1],h=Boolean(d),p=function(){f(null)};return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(r.Z,{id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){f(e.currentTarget),t(!0)},variant:"contained",sx:{backgroundColor:s.Z[500],"&:hover":{backgroundColor:s.Z[600]}},children:"Export"}),(0,l.jsxs)(a.Z,{id:"basic-menu",anchorEl:d,open:h,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(c.Z,{onClick:p,children:"Export as Excel All Data "}),(0,l.jsxs)(c.Z,{onClick:p,children:["Export as Excel Only Data in Table"," "]}),(0,l.jsx)(c.Z,{onClick:p,children:"Print Data in Table"})]})]})}},2615:function(e,t,n){n.r(t),n.d(t,{default:function(){return L},getAcronym:function(){return T},poliyAccountColumn:function(){return M},reducer:function(){return I},setNewStateValue:function(){return N}});var o=n(4165),i=n(5861),r=n(9439),a=n(7762),c=n(4942),s=n(1413),l=n(2791),u=n(4554),d=n(890),f=n(8550),h=n(6151),p=n(3239),x=n(2419),m=n(7247),g=n(1128),v=n(1957),b=n(4378),Z=n(3380),S=n(1933),y=n(1830),w=n.n(y),C=n(9018),j=n(763),k=n(7),A=n(9823),D=n(3329),B=n(341),E=n(184),z={Description:"",ShortName:"",Acronym:""},I=function(e,t){return"UPDATE_FIELD"===t.type?(0,s.Z)((0,s.Z)({},e),{},(0,c.Z)({},t.field,t.value)):e};function T(e){if(""!==e&&null!=e){var t=["and","the","in","of","for","with"];if(e=e.trim(),/^[A-Z]+$/.test(e))return e;var n,o=(e=e.toLowerCase()).split(" "),i="",r=(0,a.Z)(o);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.includes(c)||(i+=c[0])}}catch(s){r.e(s)}finally{r.f()}return i.toUpperCase()}}var M=[{field:"Acronym",headerName:"Acronym",width:130},{field:"ShortName",headerName:"ShortName",width:200},{field:"Description",headerName:"Description",flex:1},{field:"createdAt",headerName:"Created At",flex:1}],P="sub-account";function L(){var e,t,a,y=(0,g.Z)(),L=y.searchParams,_=y.setSearchParams,R=(0,l.useReducer)(I,z),F=(0,r.Z)(R,2),O=F[0],G=F[1],H=(0,l.useContext)(Z.V),q=H.myAxios,Y=H.user,U=(0,l.useState)(!1),K=(0,r.Z)(U,2),V=K[0],W=K[1],$=(0,l.useState)(!1),Q=(0,r.Z)($,2),X=Q[0],J=Q[1],ee=(0,l.useState)(""!==L.get("selected")),te=(0,r.Z)(ee,2),ne=te[0],oe=te[1],ie=(0,l.useState)(""!==L.get("selected")),re=(0,r.Z)(ie,2),ae=re[0],ce=re[1],se=(0,l.useState)(""!==L.get("selected")),le=(0,r.Z)(se,2),ue=le[0],de=le[1],fe=(0,l.useState)([]),he=(0,r.Z)(fe,2),pe=he[0],xe=he[1],me=(0,l.useRef)(null),ge=(0,l.useState)(""!==L.get("selected")),ve=(0,r.Z)(ge,2),be=ve[0],Ze=ve[1],Se=(0,S.useQueryClient)(),ye=(0,S.useQuery)({queryKey:P,queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.get("/reference/get-sub-account?subaccountSearch=".concat(L.get("subaccountSearch")),{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){console.log(e),xe(null===e||void 0===e?void 0:e.data.subaccount)}}),we=ye.isLoading,Ce=(0,S.useMutation)({mutationKey:P,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.mode||"delete"!==t.mode){e.next=4;break}return e.next=3,q.post("/reference/delete-sub-account",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 3:case 8:case 13:return e.abrupt("return",e.sent);case 4:if(!be){e.next=9;break}return delete t.mode,e.next=8,q.post("/reference/update-sub-account",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 9:return delete t.Sub_Acct,delete t.mode,e.next=13,q.post("/reference/add-sub-account",t,{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){if(e.data.success)return Se.invalidateQueries(P),w().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});w().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}}),je=Ce.mutate,ke=Ce.isLoading,Ae=Ce.variables;(0,l.useEffect)((function(){if(""!==L.get("selected")){var e=L.get("selected"),t=new Set([e]),n=null===pe||void 0===pe?void 0:pe.filter((function(e){return t.has(e.Sub_Acct.toString())}))[0];n&&N(G,n)}}),[pe,L]);var De=function(e){var t,n=e.target,o=n.name,i=n.value;"ShortName"===o&&G({type:"UPDATE_FIELD",field:"Acronym",value:null!==(t=T(null!==i&&void 0!==i?i:""))&&void 0!==t?t:""});G({type:"UPDATE_FIELD",field:o,value:i})};var Be=(0,j.throttle)((function(e){J(!0);var t=e.target.value;_((function(e){return e.set("subaccountSearch",t),e})),q.get("/reference/search-sub-account?subaccountSearch=".concat(t),{headers:{Authorization:"Bearer ".concat(null===Y||void 0===Y?void 0:Y.accessToken)}}).then((function(e){console.log(e),e.data.success&&(J(!1),xe(e.data.subaccount))}))}),300);return(0,E.jsxs)(l.Fragment,{children:[(0,E.jsx)(u.Z,{children:(0,E.jsx)(d.Z,{variant:"h5",sx:{marginBottom:"10px"},children:"Sub Account Details"})}),(0,E.jsxs)(u.Z,{sx:function(e){return(0,c.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,E.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",flex:1,width:"100%"},children:(0,E.jsx)(f.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:L.get("subaccountSearch"),onChange:Be})}),V?(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,E.jsx)(h.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-sub-account?policySearch=".concat(L.get("subaccountSearch"),"&isAll=true"),"Policy-All.xlsx",q,Y)}))},children:"Export All"}),(0,E.jsx)(h.Z,{variant:"outlined",color:"success",onClick:function(){n.e(1316).then(n.bind(n,1316)).then((function(e){e.exportFunction("/reference/export-sub-account?policySearch=".concat(L.get("subaccountSearch"),"&isAll=false"),"Policy-Search.xlsx",q,Y)}))},size:"small",children:"Export Table"}),(0,E.jsx)(h.Z,{variant:"outlined",color:"error",size:"small",onClick:function(){return W(!1)},children:"Cancel"})]}):(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[(0,E.jsx)("div",{children:(0,E.jsx)(B.L,{setExportMode:W})}),!ne&&(0,E.jsx)(h.Z,{variant:"contained",startIcon:(0,E.jsx)(x.Z,{}),id:"entry-header-save-button",onClick:function(){var e;ce(!0),oe(!0),Ze(!1),_((function(e){return e.set("policySearch",""),e.set("selected",""),e})),null===(e=document.getElementById("reset-data-grid-selection"))||void 0===e||e.click()},children:"New"}),(0,E.jsxs)(u.Z,{sx:{position:"relative"},children:[(0,E.jsx)(h.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){e.isConfirmed&&(0,C.D)(300).then((function(){var e;null===(e=me.current)||void 0===e||e.click()}))}))},disabled:ke&&void 0===Ae.mode||!ne,startIcon:(0,E.jsx)(D.Z,{}),children:"Save"}),ke&&void 0===Ae.mode&&(0,E.jsx)(p.Z,{size:24,sx:{color:k.Z[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),ne&&(0,E.jsx)(h.Z,{variant:"contained",startIcon:(0,E.jsx)(A.Z,{}),color:"error",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){var t;e.isConfirmed&&(oe(!1),ce(!1),de(!1),N(G,z),null===(t=document.getElementById("reset-data-grid-selection"))||void 0===t||t.click(),Ze(!1),_((function(e){return e.set("policySearch",""),e.set("selected",""),e})))}))},children:"Cancel"}),(0,E.jsx)(h.Z,{id:"save-entry-header",variant:"contained",sx:{backgroundColor:b.Z[500],"&:hover":{backgroundColor:b.Z[600]}},disabled:!ue,startIcon:(0,E.jsx)(m.Z,{}),onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&je({Sub_Acct:L.get("selected"),mode:"delete"})}))},children:"Delete"})]})})]}),!V&&(0,E.jsxs)("form",{onSubmit:function(e){return(a=a||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),je((0,s.Z)((0,s.Z)({},O),{},{mode:"",Sub_Acct:L.get("selected")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},children:[(0,E.jsxs)(u.Z,{sx:function(e){return(0,c.Z)({display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:[(0,E.jsx)(f.Z,{sx:{minWidth:"150px"},size:"small",label:"Acronym",name:"Acronym",required:!0,value:O.Acronym,onChange:De,InputProps:{readOnly:!0},disabled:!ae}),(0,E.jsx)(f.Z,{sx:{minWidth:"250px"},size:"small",label:"ShortName",name:"ShortName",required:!0,value:O.ShortName,onChange:De,disabled:!ae}),(0,E.jsx)(f.Z,{fullWidth:!0,size:"small",label:"Description",name:"Description",required:!0,value:O.Description,onChange:De,disabled:!ae})]}),(0,E.jsx)("button",{ref:me,style:{display:"none"},type:"submit"})]}),(0,E.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,E.jsx)(v.Z,{mutipleSelect:V,isLoading:ke||we||X,dataKey:"entry",queryKey:[P],columns:M,onSelectionChange:function(e,t){if(e.length<=0)return N(G,z),_((function(e){return e.set("selected",""),e})),Ze(!1),ce(!1),oe(!1),void de(!1);oe(!0),de(!0),ce(!0),Ze(!0);var n=new Set(e),o=t.filter((function(e){return n.has(e.Sub_Acct.toString())}));_((function(t){return t.set("selected",e[0]),t})),N(G,o[0])},getRowId:function(e){return e.Sub_Acct},rows:pe,setRows:xe})})]})}function N(e,t){Object.entries(t).forEach((function(t){var n=(0,r.Z)(t,2),o=n[0],i=n[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}},7247:function(e,t,n){var o=n(4836);t.Z=void 0;var i=o(n(5649)),r=n(184),a=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=2615.b7391327.chunk.js.map