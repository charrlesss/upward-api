"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[9522],{1957:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(1413),a=n(9439),r=n(2791),d=n(4554),o=n(7482),l=n(6212),s=n(1128),u=n(184);function c(e){var t=e.onSelectionChange,n=e.initialPage,c=void 0===n?10:n,m=e.columns,f=e.rowHeight,h=void 0===f?35:f,p=e.getRowId,w=e.rows,y=e.isLoading,g=e.mutipleSelect,x=e.height,b=void 0===x?"500px":x,v=(0,s.Z)(),N=v.searchParams,S=v.setSearchParams,Z=(0,r.useState)([]),A=(0,a.Z)(Z,2),_=A[0],k=A[1],C=(0,r.useState)(!1),j=(0,a.Z)(C,2),E=j[0],D=j[1],I=r.useState({pageSize:parseInt(N.get("pageSize"))||100,page:parseInt(N.get("page"))||1}),M=(0,a.Z)(I,2),T=M[0],z=M[1];if((0,r.useEffect)((function(){k(""===N.get("selected")?[]:[N.get("selected")])}),[N]),(0,r.useEffect)((function(){t(_,w)}),[E]),y){var F=m.map((function(e){return"id"===e.field&&(e=(0,i.Z)((0,i.Z)({},e),{},{colSpan:4,align:"center"})),e}));return(0,u.jsx)(d.Z,{sx:{height:500,width:"100%",overflowX:"scroll",position:"absolute"},children:(0,u.jsx)(l._$,{slots:{loadingOverlay:o.Z},loading:y,rows:[{id:"Loading..."}],columns:F})})}return(0,u.jsxs)(d.Z,{sx:{height:b,width:"100%",overflowX:"scroll",position:"absolute"},children:[(0,u.jsx)("button",{id:"reset-data-grid-selection",style:{display:"none"},onClick:function(){k([])},children:"reset"}),g?(0,u.jsx)(l._$,{checkboxSelection:!0,disableRowSelectionOnClick:!0,slots:{loadingOverlay:o.Z},loading:y,rowHeight:h,rows:w,columns:m,initialState:{pagination:{paginationModel:{page:0,pageSize:c}}},pageSizeOptions:[c,25,50,100],getRowId:p}):(0,u.jsx)(l._$,{slots:{loadingOverlay:o.Z},loading:y,rowHeight:h,rows:w,columns:m,initialState:{pagination:{paginationModel:{page:0,pageSize:c}}},checkboxSelection:!0,pageSizeOptions:[c,25,50,100],onRowDoubleClick:function(e){D((function(e){return!e})),k((function(t){return t.length>0&&t[0]===e.id?[]:[e.id]}))},onRowSelectionModelChange:function(e){if(e.length>1){var n=new Set(_),i=e.filter((function(e){return!n.has(e)}));t(i,w),k(i)}else t(e,w),k(e)},disableRowSelectionOnClick:!0,rowSelectionModel:_,sx:{"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer":{display:"none"},"& .MuiDataGrid-row":{cursor:"pointer"}},getRowId:p,paginationModel:T,onPaginationModelChange:function(e){z(e),S((function(t){return t.set("page",e.page.toString()),t.set("pageSize",e.pageSize.toString()),t}))}})]})}},9522:function(e,t,n){n.r(t),n.d(t,{EntryEmployee:function(){return C},default:function(){return E}});var i,a=n(4942),r=n(7762),d=n(9439),o=n(4165),l=n(5861),s=n(2791),u=n(4554),c=n(8550),m=n(8096),f=n(3380),h=n(5088),p=n(1957),w=n(1128),y=n(7432),g=n(1933),x=n(6166),b=n(829),v=n(3786),N=n(8406),S=n(1830),Z=n.n(S),A=n(3263),_=n(8749),k=n(184);function C(e,t,n,a,r){return(i=i||(0,l.Z)((0,o.Z)().mark((function e(t,n,i,a,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return e.next=3,t.post("/reference/entry-update?entry=".concat(r),i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,t.post("/reference/id-entry-employee",i,{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={firstname:"",lastname:"",middlename:"",address:"",sub_account:""};function E(e){var t,n,i,S,E=e.hasSelected,D=(0,w.Z)(),I=D.searchParams,M=D.setSearchParams,T=(0,s.useContext)(A.v),z=T.rows,F=T.setRows,L=T.loadingSearch,R=T.exportMode,O=(0,s.useReducer)(_.I6,j),P=(0,d.Z)(O,2),B=P[0],q=P[1],G=(0,s.useContext)(f.V),K=G.myAxios,H=G.user,U="entry_employee_id",W=(0,s.useState)(""),V=(0,d.Z)(W,2),Q=V[0],$=V[1],X=(0,s.useState)(!0),J=(0,d.Z)(X,2),Y=J[0],ee=J[1],te=(0,g.useQueryClient)(),ne=(0,g.useQuery)({queryKey:U,queryFn:function(){return(t=t||(0,l.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.Ku)(K,H,"Employee",I.get("entrySearch"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;F(null===e||void 0===e?void 0:e.data.entry);var n=null===e||void 0===e||null===(t=e.data.sub_accounts.filter((function(e){return"HO"===e.Acronym.trim()}))[0])||void 0===t?void 0:t.Sub_Acct;$(n),q({type:"UPDATE_FIELD",field:"sub_account",value:n})}}),ie=ne.data,ae=ne.isLoading,re=(0,g.useMutation)({mutationKey:U,mutationFn:function(e){return(n=n||(0,l.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(K,H,t,""!==I.get("selected"),"Employee");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;e.data.success&&(null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),te.invalidateQueries(U),Z().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),de=re.mutate,oe=re.isLoading,le=(0,g.useMutation)({mutationKey:U,mutationFn:function(e){return(i=i||(0,l.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.post("/reference/entry-delete?entry=Employee",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t;null===(t=document.getElementById("enable-save-entry"))||void 0===t||t.click(),e.data.success&&(te.invalidateQueries(U),Z().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}))}}),se=le.mutate,ue=le.isLoading;(0,s.useEffect)((function(){if(""===I.get("selected"))return E(!1),void ee(!0);var e=I.get("selected"),t=new Set([e]),n=z.filter((function(e){return t.has(e[U].toString())}))[0];n&&(ee(!1),E(!0),(0,x.setNewStateValue)(q,I,n,U))}),[z,I,E]);var ce=function(e){var t=e.target,n=t.name,i=t.value;q({type:"UPDATE_FIELD",field:n,value:i})};function me(){(0,y.I)(I.get("classification"),""),Object.entries(j).forEach((function(e){var t=(0,d.Z)(e,2),n=t[0],i=t[1];if("sub_account"===n)return q({type:"UPDATE_FIELD",field:n,value:Q});q({type:"UPDATE_FIELD",field:n,value:i})}))}return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)("button",{id:"delete-entry-by-id",style:{display:"none",position:"absolute"},onClick:function(){return se({id:I.get("selected")})}}),(0,k.jsx)("button",{id:"enable-fields",style:{display:"none",position:"absolute"},onClick:function(){return ee(!1)}}),(0,k.jsx)("button",{id:"disable-fields",style:{display:"none",position:"absolute"},onClick:function(){return ee(!0)}}),(0,k.jsxs)("form",{onSubmit:function(e){return(S=S||(0,l.Z)((0,o.Z)().mark((function e(t){var n,i,a,l,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=new FormData(t.currentTarget),i={},a=(0,r.Z)(n.entries());try{for(a.s();!(l=a.n()).done;)s=(0,d.Z)(l.value,2),u=s[0],c=s[1],i[u]=c}catch(o){a.e(o)}finally{a.f()}de(i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},id:"Form-Employee",children:[(0,k.jsxs)(u.Z,{sx:function(e){return(0,a.Z)({display:"flex",columnGap:"15px",flexDirection:"row",marginBottom:"10px"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:[(0,k.jsx)(h.Z,{name:"entry_employee_id",label:"Employee ID Entry"}),(0,k.jsx)(c.Z,{type:"text",name:"firstname",label:"First Name",size:"small",fullWidth:!0,required:!0,onChange:ce,disabled:Y,value:B.firstname}),(0,k.jsx)(c.Z,{type:"text",name:"middlename",label:"Middle Name",size:"small",fullWidth:!0,required:!0,onChange:ce,disabled:Y,value:B.middlename}),(0,k.jsx)(c.Z,{type:"text",name:"lastname",label:"Last Name",size:"small",fullWidth:!0,required:!0,onChange:ce,disabled:Y,value:B.lastname}),(0,k.jsxs)(m.Z,{fullWidth:!0,required:!0,size:"small",children:[(0,k.jsx)(b.Z,{id:"Sub Account",children:"Sub Account"}),(0,k.jsx)(N.Z,{value:B.sub_account,onChange:function(e){q({type:"UPDATE_FIELD",field:"sub_account",value:e.target.value})},labelId:"Sub Account",label:"Sub Account",name:"sub_account",disabled:Y,children:null===ie||void 0===ie?void 0:ie.data.sub_accounts.map((function(e){return(0,k.jsx)(v.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]})]}),(0,k.jsx)(c.Z,{name:"address",label:"Address",minRows:10,size:"small",fullWidth:!0,style:{margin:"10px 0px"},onChange:ce,disabled:Y,value:B.address}),(0,k.jsx)("button",{type:"submit",id:"Employee",style:{display:"none"}}),(0,k.jsx)("button",{type:"button",id:"Employee-reset",onClick:me,style:{display:"none"}})]}),(0,k.jsx)("div",{style:{marginTop:"10px",width:"100%",position:"relative"},children:(0,k.jsx)(p.Z,{mutipleSelect:R,isLoading:ae||L||oe||ue,dataKey:"entry",queryKey:[U],columns:_.kb,onSelectionChange:function(e,t){if(e.length<=0)return me(),E(!1),ee(!0),void M((function(e){return e.set("selected",""),e}));ee(!1),E(!0);var n=new Set(e),i=t.filter((function(e){return n.has(e[U].toString())}));M((function(t){return t.set("selected",e[0]),t})),(0,x.setNewStateValue)(q,I,i[0],U)},getRowId:function(e){return e[U]},rows:z,setRows:F})})]})}},5088:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(184);function a(e){var t=e.name,n=e.label;return(0,i.jsx)("div",{style:{flex:1,minWidth:"190px",position:"relative"},children:(0,i.jsxs)("fieldset",{style:{position:"relative",height:"40px",margin:"0",outline:"none",borderRadius:"5px",border:"1px solid #9ca3af"},children:[(0,i.jsx)("legend",{style:{fontSize:"11px",margin:0,position:"absolute",top:"-10px",background:"white",padding:"0 5px"},children:n}),(0,i.jsx)("p",{id:"".concat(t,"-text"),style:{position:"absolute",top:"-20%",fontSize:"15px",color:"#71717a"},children:"Generate ID, Click New"}),(0,i.jsx)("input",{type:"text",name:t,style:{opacity:0,position:"absolute"}})]})})}},8749:function(e,t,n){n.d(t,{GY:function(){return m},I6:function(){return h},Ku:function(){return p},fJ:function(){return c},kb:function(){return s},m5:function(){return f},oy:function(){return l},y:function(){return u}});var i,a=n(4165),r=n(5861),d=n(4942),o=n(1413),l=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],s=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],u=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],c=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],m=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],f=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"createdAt",headerName:"Created At",width:200}],h=function(e,t){return"UPDATE_FIELD"===t.type?(0,o.Z)((0,o.Z)({},e),{},(0,d.Z)({},t.field,t.value)):e};function p(e,t,n,d){return(i=i||(0,r.Z)((0,a.Z)().mark((function e(t,n,i,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/reference/search-entry?entrySearch=".concat(r,"&entry=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=9522.e7f18c71.chunk.js.map